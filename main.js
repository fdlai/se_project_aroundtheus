!function(){"use strict";class t{constructor(t,e,s,i,r){this._data=t,this._name=t.name,this._link=t.link,this.id=t._id,this._cardSelector=e,this._handleImageClick=s,this._handleTrashButtonClick=i,this._handleLikeButtonClick=r,this._template=document.querySelector(this._cardSelector).content,this._cardTemplate=this._template.querySelector(".card"),this._cardElement=this._cardTemplate.cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButtonStateActive=t.isLiked,this._setLikeButtonState()}_addLikeFunctionality(){this._likeButton.addEventListener("click",(async()=>{await this._handleLikeButtonClick(this,this._likeButtonStateActive),this._likeButtonStateActive=!this._likeButtonStateActive,this._setLikeButtonState()}))}_setLikeButtonState(){this._likeButtonStateActive?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}deleteCard(){this._errorCard&&this._errorCard.remove(),this._cardElement.remove()}_setEventListeners(){this._addLikeFunctionality(),this._deleteButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._cardElementImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_replaceWithErrorCard(){this._errorMessage="Image has failed to load",this._errorCardTemplate=document.querySelector("#error-card-template").content.firstElementChild,this._errorCard=this._errorCardTemplate.cloneNode(!0),this._errorCardMessage=this._errorCard.querySelector(".card__error-message"),this._errorDeleteButton=this._errorCard.querySelector(".card__delete-button"),this._errorCardTitle=this._errorCard.querySelector(".card__title"),this._errorCardMessage.textContent=this._errorMessage,this._errorCardTitle.textContent=this._cardElement.innerText?this._cardElement.textContent:"...",this._errorDeleteButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._cardElement.replaceWith(this._errorCard)}getCardElement(){return this._cardElementTitle=this._cardElement.querySelector(".card__title"),this._cardElementImage=this._cardElement.querySelector(".card__image"),this._cardElementTitle.textContent=this._name,this._cardElementImage.setAttribute("src",`${this._link}`),this._cardElementImage.setAttribute("alt",`${this._name}`),this._setEventListeners(),this._cardElementImage.onerror=()=>this._replaceWithErrorCard(),this._cardElement}}class e{constructor(t,e){this._settings=t,this._form=e,this._inputs=[...this._form.querySelectorAll(this._settings.inputSelector)],this._submitButton=this._form.querySelector(this._settings.submitButtonSelector)}_checkAllFormInputsAreValid(){return this._inputs.every((t=>t.validity.valid))}disableSubmitButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_toggleSubmitButton(){this._checkAllFormInputsAreValid()?this.enableSubmitButton():this.disableSubmitButton()}_showErrorMessage(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent=t.validationMessage,e.classList.add(this._settings.errorClass),t.classList.add(this._settings.inputErrorClass)}_hideErrorMessage(t){this._form.querySelector(`#${t.id}-error`).classList.remove(this._settings.errorClass),t.classList.remove(this._settings.inputErrorClass)}_handleErrorVisibility(t){t.validity.valid?this._hideErrorMessage(t):this._showErrorMessage(t)}resetFormValidation(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._form.reset(),this._toggleSubmitButton(),this._inputs.forEach((t=>{this._hideErrorMessage(t)}))}enableValidation(){this._inputs.forEach((t=>{t.addEventListener("input",(e=>{this._toggleSubmitButton(),this._handleErrorVisibility(t)}))}))}}class s{constructor(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._textSelector=t,this._tooltipSelector=e,this._updateText=s}handleTooltip(){document.querySelectorAll(this._textSelector).forEach((t=>{const e=t.scrollWidth>t.clientWidth,s=t.parentNode.querySelector(this._tooltipSelector);if(e&&!s){const e=document.createElement("p");e.classList.add(this._tooltipSelector.slice(1)),e.textContent=t.textContent,t.after(e)}else e&&s&&this._updateText?t.nextElementSibling.textContent=t.innerText:!e&&s&&t.nextElementSibling.remove()}))}}class i{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"append";this._items.forEach((e=>{this.addItem(e,t)}))}addItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const s=this._renderer(t);switch(e){case"append":this._container.append(s);break;case"prepend":this._container.prepend(s);break;default:console.log("Error. Please use only 'append' or 'prepend'.")}}}class r{constructor(t){this._popupSelector=t,this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.classList.add("modal_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("modal_opened")}_clickToCloseModal(t){t.target!==this._popupElement&&t.target!==this._closeButton||this.close()}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{this._clickToCloseModal(t)}))}}class o extends r{constructor(t,e){super(t),this._handleFormSubmit=e,this._formElement=this._popupElement.querySelector(".modal__form"),this._inputObject={},this._inputElements=[...this._popupElement.querySelectorAll(".modal__input")],this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._defaultSubmitButtonText=this._submitButton.textContent,this.setEventListeners()}getInputElements(){return this._inputElements}_getInputValues(){return this._inputElements.forEach((t=>{this._inputObject[t.name]=t.value})),this._inputObject}setInputValues(t){this._inputElements.forEach((e=>{e.value=t[e.name]}))}getInputElementAttributeNames(){const t=[];return this._inputElements.forEach((e=>{t.push(e.name)})),t}_changeSubmitButtonText(t){this._submitButton.textContent=t}async applySavingAnimation(t){function e(t){return new Promise((e=>setTimeout(e,t)))}try{this._submitButton.classList.add("modal__submit-button_hover_disabled"),this._submitButton.classList.add("modal__submit-button_animation_active");const[s,i]=await Promise.all([t,e(1200)]);return this._submitButton.classList.remove("modal__submit-button_animation_active"),this._submitButton.classList.add("modal__submit-button_saved"),await e(180),this._submitButton.classList.remove("modal__submit-button_hover_disabled"),s}catch(t){throw this._submitButton.classList.remove("modal__submit-button_animation_active"),this._submitButton.classList.add("modal__submit-button_failed"),await e(180),this._submitButton.classList.remove("modal__submit-button_hover_disabled"),t}}open(){this._submitButton.textContent!==this._defaultSubmitButtonText&&this._changeSubmitButtonText(this._defaultSubmitButtonText),this._submitButton.classList.contains("modal__submit-button_saved")&&this._submitButton.classList.remove("modal__submit-button_saved"),this._submitButton.classList.contains("modal__submit-button_failed")&&this._submitButton.classList.remove("modal__submit-button_failed"),super.open()}setEventListeners(){this._formElement.addEventListener("submit",(async t=>{t.preventDefault(),await this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},a=document.querySelector("#profile-edit-button"),l=document.querySelector("#profile-add-button"),c=document.querySelector(".profile__image"),d={},u=new class{constructor(t){this._apiSettings=t,this._headers=t.headers,this._baseUrl=t.baseUrl,this._userInfoUrl=`${this._baseUrl}/users/me`,this._cardsUrl=`${this._baseUrl}/cards`,this._avatarUrl=`${this._userInfoUrl}/avatar`}_checkResponse(t){return t.ok?t.json():Promise.reject(t)}async getInitialCards(){const t=await fetch(this._cardsUrl,{headers:this._headers}),e=await this._checkResponse(t);return console.log(e),e}async addCard(t){const e=await fetch(this._cardsUrl,{method:"POST",headers:this._headers,body:JSON.stringify(t)}),s=await this._checkResponse(e);return console.log(s),s}async deleteCard(t){const e=await fetch(`${this._cardsUrl}/${t}`,{method:"DELETE",headers:this._headers}),s=await this._checkResponse(e);return console.log(s),e}async likeCard(t){const e=await fetch(`${this._cardsUrl}/${t}/likes`,{method:"PUT",headers:this._headers}),s=await this._checkResponse(e);return console.log(s),e}async unlikeCard(t){const e=await fetch(`${this._cardsUrl}/${t}/likes`,{method:"DELETE",headers:this._headers}),s=await this._checkResponse(e);return console.log(s),e}async fetchUserInfo(){const t=await fetch(this._userInfoUrl,{headers:this._headers}),e=await this._checkResponse(t);return console.log(e),e}async updateUserInfo(t,e){const s=await fetch(this._userInfoUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})}),i=await this._checkResponse(s);return console.log(i),i}async changeAvatar(t){const e=await fetch(this._avatarUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}),s=await this._checkResponse(e);return console.log(s),s}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"cb8f3768-1e1a-47c8-a0f6-f4754f9bab87","Content-Type":"application/json"}}),h=new s(".card__title",".card__tooltip",!1),_=new s("#profile-title",".profile__tooltip-title"),m=new s("#profile-description",".profile__tooltip-description");let p;const b=new o("#modal-edit-profile",(async function(t){let{title:e,description:s}=t;try{const t=u.updateUserInfo(e,s);await b.applySavingAnimation(t),C.setUserInfo({userName:e,userDescription:s}),_.handleTooltip(),m.handleTooltip()}catch(t){throw console.log("Failed to update user info: ",t),y.setMessage(`Error ${t.status}. Error setting user info.`),y.open(),t}})),g=new o("#modal-add-card",(async function(t){let{title:e,imageLink:s}=t;try{const t={name:e,link:s},i=u.addCard(t),r=await g.applySavingAnimation(i);p.addItem(r,"prepend"),h.handleTooltip(),d["modal-add-card-form"].resetFormValidation(!0)}catch(t){throw console.error("Error! Could not add a card: ",t),y.setMessage(`Error ${t.status}. Could not add card.`),y.open(),t}})),E=new class extends r{constructor(t){super(t),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__subtitle"),this.setEventListeners()}open(t){let{name:e,link:s}=t;this._popupImage.src=s,this._popupImage.alt=e,this._popupTitle.textContent=e,this._popupImage.onload=()=>{super.open()}}}("#modal-picture"),f=new class extends r{constructor(t){super(t),this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._form=this._popupElement.querySelector(".modal__form"),this._setEventListeners()}setSubmitHandler(t){this._submitHandler=t}_setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._submitHandler?this._submitHandler():console.log("submitHandler has not been set")}))}}("#modal-card-delete"),v=new o("#modal-profile-picture",(async function(t){try{const e=u.changeAvatar(t.imageLink);await v.applySavingAnimation(e),C.setUserInfo({userImageUrl:t.imageLink}),d["modal-profile-picture-form"].resetFormValidation(!0)}catch(t){throw console.log("Could not change avatar image: ",t),y.setMessage(`Error ${t.status}. Could not change profile picture.`),y.open(),t}})),y=new class extends r{constructor(t){super(t),this._textMessage=this._popupElement.querySelector(".modal__heading_type_message"),this.setEventListeners()}setMessage(t){""===this._textMessage.textContent?this._textMessage.textContent=t:this._textMessage.innerHTML=this._textMessage.textContent+"<br><br>"+t}close(){this._textMessage.textContent="",super.close()}}("#modal-message"),C=new class{constructor(t,e,s){this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(e),this._imageElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent.trim(),description:this._descriptionElement.textContent.trim(),imageLink:this._imageElement.src}}setUserInfo(t){let{userName:e,userDescription:s,userImageUrl:i}=t;e&&(this._nameElement.textContent=e),s&&(this._descriptionElement.textContent=s),i&&(this._imageElement.src=i),this._imageElement.onerror=()=>{this._imageElement.src="./8b4523932e498ee19285.png",alert("Invalid URL. Could not change image!")}}}("#profile-title","#profile-description",".profile__image");function S(e){const s=new t(e,"#card-template",(t=>E.open(t)),k,L);return s.getCardElement()}async function k(t){f.open(),f.setSubmitHandler((async()=>{try{await u.deleteCard(t.id),t.deleteCard(),f.close()}catch(t){console.log("Failed to delete card: ",t),y.setMessage(`Error ${t.status}. Could not delete card.`),y.open()}}))}async function L(t,e){return e?u.unlikeCard(t.id).catch((t=>{throw console.log("Error! Failed to unlike button: ",t),y.setMessage(`Error ${t.status}. Could not unlike card.`),y.open(),t})):u.likeCard(t.id).catch((t=>{throw console.log("Error! Failed to like button: ",t),y.setMessage(`Error ${t.status}. Could not like card.`),y.open(),t}))}a.addEventListener("click",(()=>{const t=C.getUserInfo(),e={title:t.name,description:t.description};b.setInputValues(e),d["modal-profile-form"].resetFormValidation(!1),b.open()})),l.addEventListener("click",(()=>{g.open()})),window.addEventListener("resize",(()=>{h.handleTooltip(),_.handleTooltip(),m.handleTooltip()})),c.addEventListener("click",(()=>{v.open()})),Promise.all([async function(){try{const t=await u.getInitialCards();p=new i({items:t,renderer:S},".cards__list"),p.renderItems()}catch(t){console.log("Failed to get cards: ",t),y.setMessage(`Error ${t.status}. Could not retrieve cards.`),y.open()}}(),async function(){try{const t=await u.fetchUserInfo();C.setUserInfo({userName:t.name,userDescription:t.about,userImageUrl:t.avatar})}catch(t){console.log("Failed to get user info: ",t),y.setMessage(`Error ${t.status}. Could not retrieve user info.`),y.open()}}()]).then((()=>{var t;h.handleTooltip(),_.handleTooltip(),m.handleTooltip(),t=n,[...document.querySelectorAll(t.formSelector)].forEach((s=>{const i=new e(t,s),r=s.getAttribute("name");d[r]=i,i.enableValidation()}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQVlELEVBQzNCQSxFQUFjcEwsa0JBQWtCLEdBa0xNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVG9vbHRpcEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlVHJhc2hCdXR0b25DbGljayxcbiAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b25DbGljayA9IGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrID0gaGFuZGxlTGlrZUJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uU3RhdGVBY3RpdmUgPSBkYXRhLmlzTGlrZWQ7XG4gICAgdGhpcy5fc2V0TGlrZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvL2xpa2UtYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgX2FkZExpa2VGdW5jdGlvbmFsaXR5KCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayh0aGlzLCB0aGlzLl9saWtlQnV0dG9uU3RhdGVBY3RpdmUpO1xuICAgICAgLy9mbGlwIHRoZSBzdGF0ZSBvZiB0aGUgbGlrZSBidXR0b25cbiAgICAgIHRoaXMuX2xpa2VCdXR0b25TdGF0ZUFjdGl2ZSA9ICF0aGlzLl9saWtlQnV0dG9uU3RhdGVBY3RpdmU7XG5cbiAgICAgIHRoaXMuX3NldExpa2VCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLy9tYWludGFpbiB0aGUgc3RhdGUgb2YgdGhlIGxpa2UgYnV0dG9uXG4gIF9zZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2VCdXR0b25TdGF0ZUFjdGl2ZSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICBpZiAodGhpcy5fZXJyb3JDYXJkKSB7XG4gICAgICB0aGlzLl9lcnJvckNhcmQucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2FkZExpa2VGdW5jdGlvbmFsaXR5KCk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbkNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICAvL3JlcGxhY2VzIGNhcmQgd2l0aCBlcnJvci1jYXJkXG4gIF9yZXBsYWNlV2l0aEVycm9yQ2FyZCgpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSBcIkltYWdlIGhhcyBmYWlsZWQgdG8gbG9hZFwiO1xuICAgIHRoaXMuX2Vycm9yQ2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI2Vycm9yLWNhcmQtdGVtcGxhdGVcIlxuICAgICkuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB0aGlzLl9lcnJvckNhcmQgPSB0aGlzLl9lcnJvckNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fZXJyb3JDYXJkTWVzc2FnZSA9IHRoaXMuX2Vycm9yQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZXJyb3ItbWVzc2FnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2Vycm9yQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckNhcmRUaXRsZSA9IHRoaXMuX2Vycm9yQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2Vycm9yQ2FyZE1lc3NhZ2UudGV4dENvbnRlbnQgPSB0aGlzLl9lcnJvck1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JDYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5pbm5lclRleHRcbiAgICAgID8gdGhpcy5fY2FyZEVsZW1lbnQudGV4dENvbnRlbnRcbiAgICAgIDogXCIuLi5cIjtcbiAgICAvL3RoaXMuX2FkZERlbGV0ZUZ1bmN0aW9uYWxpdHkodGhpcy5fZXJyb3JEZWxldGVCdXR0b24sIHRoaXMuX2Vycm9yQ2FyZCk7XG4gICAgdGhpcy5fZXJyb3JEZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5fZXJyb3JDYXJkKTtcbiAgfVxuXG4gIC8vY3JlYXRlIGNhcmQsIGdpdmUgaXQgaXRzIG5hbWUgYW5kIGltYWdlXG4gIGdldENhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50VGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50VGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGAke3RoaXMuX2xpbmt9YCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgYCR7dGhpcy5fbmFtZX1gKTtcblxuICAgIC8vYWRkIGxpa2UsIGRlbGV0ZSBhbmQgcGljdHVyZS1tb2RhbCBmdW5jdGlvbmFsaXR5XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vdXNlIGVycm9yLWNhcmQgaWYgdGhlIGltYWdlIGZhaWxzIHRvIGxvYWRcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLm9uZXJyb3IgPSAoKSA9PiB0aGlzLl9yZXBsYWNlV2l0aEVycm9yQ2FyZCgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2lucHV0cyA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIC8vcmV0dXJucyB0cnVlIGlmIGFsbCBpbnB1dHMgaW4gdGhlIGZvcm0gYXJlIHZhbGlkXG4gIF9jaGVja0FsbEZvcm1JbnB1dHNBcmVWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgLy9kaXNhYmxlcyBvciBlbmFibGVzIHN1Ym1pdC1idXR0b24gd2hldGhlciBhbnkgaW5wdXQgaW4gdGhlIGZvcm0gaXMgaW52YWxpZCBvciBub3RcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICBpZiAodGhpcy5fY2hlY2tBbGxGb3JtSW5wdXRzQXJlVmFsaWQoKSkge1xuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgLy9kaXNwbGF5IGVycm9yIG1lc3NhZ2VzIGZvciBhIHBhcnRpY3VsYXIgaW5wdXQgZWxlbWVudFxuICBfc2hvd0Vycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vcmVtb3ZlIGVycm9yIG1lc3NhZ2VzIGZvciBhIHBhcnRpY3VsYXIgaW5wdXQgZWxlbWVudFxuICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy9kaXNwbGF5IG9yIHJlbW92ZSBlcnJvciBtZXNzYWdlcyBmcm9tIGFuIGlucHV0IGVsZW1lbnQsIHdoZXRoZXIgdGhlIGlucHV0IGlzIHZhbGlkIG9yIG5vdFxuICBfaGFuZGxlRXJyb3JWaXNpYmlsaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vcmVzZXQgdmFsaWRhdGlvbiBvZiB0aGUgZm9ybS4gSWYgcGFyYW1ldGVyICdlbXB0eUlucHV0cycgaXMgdHJ1ZSA9PiB0aGVuIGVtcHR5IHRoZSBmb3JtJ3MgaW5wdXRzXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24oZW1wdHlJbnB1dHMgPSB0cnVlKSB7XG4gICAgaWYgKGVtcHR5SW5wdXRzKSB7XG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dCk7XG4gICAgfSk7XG4gIH1cblxuICAvL3NldCBhbiBpbnB1dC12YWxpZGF0aW9uIGV2ZW50IGxpc3RlbmVyIG9uIGVhY2ggaW5wdXQgZWxlbWVudCB3aXRoaW4gdGhlIGZvcm1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXJyb3JWaXNpYmlsaXR5KGlucHV0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sdGlwSGFuZGxlciB7XG4gIC8vYm90aCBzZWxlY3RvcnMgc2hvdWxkIGluY2x1ZGUgdGhlaXIgLiBvciAjXG4gIGNvbnN0cnVjdG9yKHRleHRTZWxlY3RvciwgdG9vbHRpcFNlbGVjdG9yLCB1cGRhdGVUZXh0ID0gdHJ1ZSkge1xuICAgIHRoaXMuX3RleHRTZWxlY3RvciA9IHRleHRTZWxlY3RvcjtcbiAgICB0aGlzLl90b29sdGlwU2VsZWN0b3IgPSB0b29sdGlwU2VsZWN0b3I7XG4gICAgdGhpcy5fdXBkYXRlVGV4dCA9IHVwZGF0ZVRleHQ7XG4gIH1cblxuICBoYW5kbGVUb29sdGlwKCkge1xuICAgIGNvbnN0IHRleHRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdGV4dFNlbGVjdG9yKTtcbiAgICB0ZXh0RWxlbWVudHMuZm9yRWFjaCgoZWx0KSA9PiB7XG4gICAgICBjb25zdCBlbGxpcHNpc0V4aXN0cyA9IGVsdC5zY3JvbGxXaWR0aCA+IGVsdC5jbGllbnRXaWR0aDtcbiAgICAgIGNvbnN0IHRvb2x0aXBJc09wZW4gPSBlbHQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3Rvb2x0aXBTZWxlY3Rvcik7XG4gICAgICBpZiAoZWxsaXBzaXNFeGlzdHMgJiYgIXRvb2x0aXBJc09wZW4pIHtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0b29sdGlwLmNsYXNzTGlzdC5hZGQodGhpcy5fdG9vbHRpcFNlbGVjdG9yLnNsaWNlKDEpKTtcbiAgICAgICAgdG9vbHRpcC50ZXh0Q29udGVudCA9IGVsdC50ZXh0Q29udGVudDtcbiAgICAgICAgZWx0LmFmdGVyKHRvb2x0aXApO1xuICAgICAgfSBlbHNlIGlmIChlbGxpcHNpc0V4aXN0cyAmJiB0b29sdGlwSXNPcGVuICYmIHRoaXMuX3VwZGF0ZVRleHQpIHtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGVsdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHRvb2x0aXAudGV4dENvbnRlbnQgPSBlbHQuaW5uZXJUZXh0O1xuICAgICAgfSBlbHNlIGlmICghZWxsaXBzaXNFeGlzdHMgJiYgdG9vbHRpcElzT3Blbikge1xuICAgICAgICBjb25zdCB0b29sdGlwID0gZWx0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdG9vbHRpcC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiLy9oYW5kbGVzIHNlY3Rpb25zIG9mIHRoZSBwYWdlIGJ5IHRha2luZyBpbiBkYXRhLCBjb252ZXJ0aW5nIGl0IHRvIEhUTUwgYW5kIHBsYWNpbmcgaXQgb24gdGhlIHBhZ2VcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vYW4gYXJyYXkgb2YgaXRlbXMgdGhhdCBiZWxvbmdzIGluIHRoZSBzZWN0aW9uXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy90aGUgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyBlYWNoIGl0ZW0gdG8gYW4gaHRtbCBlbGVtZW50XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IC8vdGhlIHBsYWNlIHRoYXQgY29udGFpbnMgdGhlIGl0ZW1zXG4gIH1cbiAgLy9yZW5kZXIgYW4gYXJyYXkgb2YgaXRlbSBkYXRhIHRvIHRoZSBwYWdlXG4gIHJlbmRlckl0ZW1zKHBsYWNlbWVudCA9IFwiYXBwZW5kXCIpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSwgcGxhY2VtZW50KTtcbiAgICB9KTtcbiAgfVxuICAvL3R1cm4gaXRlbSB0byBlbGVtZW50IGFuZCBhcHBlbmQgb3IgcHJlcGVuZCBlbGVtZW50IHRvIGNvbnRhaW5lclxuICBhZGRJdGVtKGl0ZW0sIHBsYWNlbWVudCA9IFwiYXBwZW5kXCIpIHtcbiAgICBjb25zdCBpdGVtRWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIHN3aXRjaCAocGxhY2VtZW50KSB7XG4gICAgICBjYXNlIFwiYXBwZW5kXCI6XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbUVsZW1lbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcmVwZW5kXCI6XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW1FbGVtZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yLiBQbGVhc2UgdXNlIG9ubHkgJ2FwcGVuZCcgb3IgJ3ByZXBlbmQnLlwiKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxuICAgICk7XG4gIH1cbiAgLy9vcGVucyBwb3B1cFxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgfVxuICAvL2Nsb3NlcyBwb3B1cFxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIH1cbiAgLy9jbG9zZXMgcG9wdXAgd2hlbiBjbGlja2luZyBYIG9yIG92ZXJsYXlcbiAgX2NsaWNrVG9DbG9zZU1vZGFsKGV2ZW50KSB7XG4gICAgaWYgKFxuICAgICAgZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHxcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fY2xvc2VCdXR0b25cbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgLy9jbG9zZSBwb3B1cCB3aXRoIEVzYyBrZXlcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbiAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzIHRvIGNsb3NlIHBvcHVwIHdoZW4gY2xpY2tpbmcgWCBvciB0aGUgb3ZlcmxheVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgdGhpcy5fY2xpY2tUb0Nsb3NlTW9kYWwoZSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dE9iamVjdCA9IHt9O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXG4gICAgICAuLi50aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIiksXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVycyBpbiB0aGUgY29uc3RydWN0b3JcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgLy9yZXR1cm4gYXJyYXkgb2YgYWxsIGlucHV0IGVsZW1lbnRzXG4gIGdldElucHV0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxlbWVudHM7XG4gIH1cbiAgLy9yZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHVzZXItaW5wdXR0ZWQgdGV4dFxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRPYmplY3Q7XG4gIH1cbiAgLy9zZXQgdGhlIHVzZXItdHlwZWQtaW4gdGV4dCBjb250ZW50IG9mIHRoZSBpbnB1dCBlbGVtZW50c1xuICAvL2RhdGEgaXMgYW4gb2JqZWN0IHdpdGgga2V5bmFtZXMgZXF1YWwgdG8gdGhlIG5hbWUgYXR0cmlidXRlIG9uIGVhY2ggaW5wdXQgZWxlbWVudFxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5wdXRFbGVtZW50QXR0cmlidXRlTmFtZXMoKSB7XG4gICAgY29uc3QgYXR0cmlidXRlTmFtZXMgPSBbXTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBhdHRyaWJ1dGVOYW1lcy5wdXNoKGlucHV0Lm5hbWUpO1xuICAgIH0pO1xuICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lcztcbiAgfVxuXG4gIF9jaGFuZ2VTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9XG5cbiAgLy90YWtlcyBhIHByb21pc2UgJ2ZldGNoUmVxdWVzdCcsIGFuZCBydW5zIGEgc2F2aW5nIGFuaW1hdGlvbiBvbiB0aGUgc3VibWl0IGJ1dHRvbiwgd2hpY2ggcnVucyBhIG1pbmltdW0gdGltZSwgYW5kIGRvZXNuJ3QgY29tcGxldGUgdW50aWwgZmV0Y2hSZXF1ZXN0IGNvbXBsZXRlc1xuICBhc3luYyBhcHBseVNhdmluZ0FuaW1hdGlvbihmZXRjaFJlcXVlc3QpIHtcbiAgICBmdW5jdGlvbiBkZWxheShtcykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2hvdmVyX2Rpc2FibGVkXCIpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9hbmltYXRpb25fYWN0aXZlXCIpO1xuICAgICAgY29uc3QgW2ZldGNoUmVzdWx0LCBfXSA9IGF3YWl0IFByb21pc2UuYWxsKFtmZXRjaFJlcXVlc3QsIGRlbGF5KDEyMDApXSk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9hbmltYXRpb25fYWN0aXZlXCJcbiAgICAgICk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnV0dG9uX3NhdmVkXCIpO1xuICAgICAgYXdhaXQgZGVsYXkoMTgwKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFxuICAgICAgICBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2hvdmVyX2Rpc2FibGVkXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmV0Y2hSZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9hbmltYXRpb25fYWN0aXZlXCJcbiAgICAgICk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2ZhaWxlZFwiKTtcbiAgICAgIGF3YWl0IGRlbGF5KDE4MCk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9ob3Zlcl9kaXNhYmxlZFwiXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgaWYgKHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCAhPT0gdGhpcy5fZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQpIHtcbiAgICAgIHRoaXMuX2NoYW5nZVN1Ym1pdEJ1dHRvblRleHQodGhpcy5fZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19zdWJtaXQtYnV0dG9uX3NhdmVkXCIpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19zdWJtaXQtYnV0dG9uX3NhdmVkXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2ZhaWxlZFwiKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9mYWlsZWRcIik7XG4gICAgfVxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vYWRkIHRoZSBzdWJtaXQgZXZlbnQgaGFuZGxlciB0byB0aGUgZm9ybVxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiRWwgQ2FwaXRhblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0MjY2MDQ5NjY4NDgtZDdhZGFjNDAyYmZmP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEwMDAmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJXYW5ha2EsIE5ldyBaZWFsYW5kXCIsXG4gICAgbGluazogXCJodHRwczovL3d3dy53YWxscGFwZXJ1cC5jb20vdXBsb2Fkcy93YWxscGFwZXJzLzIwMTMvMDkvMjUvMTUxMzY1LzM0OGYzYzQ5YjVlNWQ3OGJhZTc3MjU3OGRjMWU5ZDM2LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIEF0aXRsXFx1MDBFMW5cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3LnJvYWRhZmZhaXIuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE3LzEwL2xha2UtYXRpdGxhbi1ndWF0ZW1hbGEtc2h1dHRlcnN0b2NrXzE4OTY0OTI0NC5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFuZmYsIENhbmFkYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pMi53cC5jb20vd3d3LmVyaWthc3RyYXZlbHMuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE1LzExL1AxMTcwMzI3LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJHcmFuZCBDYW55b25cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3LndhbGxwYXBlcmZsYXJlLmNvbS9zdGF0aWMvMTUvMTkzLzI2Ni9hcmNoZXMtbmF0aW9uYWwtcGFyay11dGFoLXJvY2stbmF0dXJlLXdhbGxwYXBlci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW1hem9uIFJhaW5mb3Jlc3RcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vZm91bmR0aGV3b3JsZC5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTUvMTIvQW1hem9uLVJhaW5mb3Jlc3QtOS5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjb25maWdPYmplY3QgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgYXBpU2V0dGluZ3MgPSB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiY2I4ZjM3NjgtMWUxYS00N2M4LWEwZjYtZjQ3NTRmOWJhYjg3XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBUb29sdGlwSGFuZGxlciBmcm9tIFwiLi4vY29tcG9uZW50cy9Ub29sdGlwSGFuZGxlci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aE1lc3NhZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoTWVzc2FnZS5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWdPYmplY3QsIGFwaVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuLy9pbXBvcnQge3ppcE9iamVjdH0gZnJvbSBcImxvZGFzaFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3RzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBzaXRlQXBpID0gbmV3IEFwaShhcGlTZXR0aW5ncyk7XG5cbmNvbnN0IGNhcmRUb29sdGlwSGFuZGxlciA9IG5ldyBUb29sdGlwSGFuZGxlcihcbiAgXCIuY2FyZF9fdGl0bGVcIixcbiAgXCIuY2FyZF9fdG9vbHRpcFwiLFxuICBmYWxzZVxuKTtcbmNvbnN0IHByb2ZpbGVUaXRsZVRvb2x0aXBIYW5kbGVyID0gbmV3IFRvb2x0aXBIYW5kbGVyKFxuICBcIiNwcm9maWxlLXRpdGxlXCIsXG4gIFwiLnByb2ZpbGVfX3Rvb2x0aXAtdGl0bGVcIlxuKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvblRvb2x0aXBIYW5kbGVyID0gbmV3IFRvb2x0aXBIYW5kbGVyKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXG4gIFwiLnByb2ZpbGVfX3Rvb2x0aXAtZGVzY3JpcHRpb25cIlxuKTtcblxubGV0IGNhcmRTZWN0aW9uO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI21vZGFsLWVkaXQtcHJvZmlsZVwiLFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWFkZC1jYXJkXCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNtb2RhbC1waWN0dXJlXCIpO1xuY29uc3QgY29uZmlybUNhcmREZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjbW9kYWwtY2FyZC1kZWxldGVcIik7XG5jb25zdCBwcm9maWxlUGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI21vZGFsLXByb2ZpbGUtcGljdHVyZVwiLFxuICBoYW5kbGVQcm9maWxlUGljdHVyZVN1Ym1pdFxuKTtcbmNvbnN0IGVycm9yTWVzc2FnZVBvcHVwID0gbmV3IFBvcHVwV2l0aE1lc3NhZ2UoXCIjbW9kYWwtbWVzc2FnZVwiKTtcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgXCIjcHJvZmlsZS10aXRsZVwiLFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXG4gIFwiLnByb2ZpbGVfX2ltYWdlXCJcbik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIChjYXJkRGF0YSkgPT4gaW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKSxcbiAgICBoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrLFxuICAgIGhhbmRsZUxpa2VCdXR0b25DbGlja1xuICApO1xuICByZXR1cm4gY2FyZC5nZXRDYXJkRWxlbWVudCgpO1xufVxuXG4vL2VuYWJsZSBpbnB1dCB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXNcbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb25PbkFsbEZvcm1zKGNvbmZpZykge1xuICBjb25zdCBmb3JtcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpXTtcbiAgZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xuICAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm0pO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIC8vYWRkIHZhbGlkYXRvcnMgZm9yIGFsbCBmb3Jtc1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IGZvcm1WYWxpZGF0b3I7XG4gICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXRVc2VySW5mb0Zyb21BcGkoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXBpVXNlckluZm8gPSBhd2FpdCBzaXRlQXBpLmZldGNoVXNlckluZm8oKTtcbiAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgdXNlck5hbWU6IGFwaVVzZXJJbmZvLm5hbWUsXG4gICAgICB1c2VyRGVzY3JpcHRpb246IGFwaVVzZXJJbmZvLmFib3V0LFxuICAgICAgdXNlckltYWdlVXJsOiBhcGlVc2VySW5mby5hdmF0YXIsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm86IFwiLCBlcnIpO1xuICAgIGVycm9yTWVzc2FnZVBvcHVwLnNldE1lc3NhZ2UoXG4gICAgICBgRXJyb3IgJHtlcnIuc3RhdHVzfS4gQ291bGQgbm90IHJldHJpZXZlIHVzZXIgaW5mby5gXG4gICAgKTtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUNhcmRzKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGluaXRpYWxDYXJkcyA9IGF3YWl0IHNpdGVBcGkuZ2V0SW5pdGlhbENhcmRzKCk7XG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGdldCBjYXJkczogXCIsIGVycik7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShcbiAgICAgIGBFcnJvciAke2Vyci5zdGF0dXN9LiBDb3VsZCBub3QgcmV0cmlldmUgY2FyZHMuYFxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2soY2FyZCkge1xuICBjb25maXJtQ2FyZERlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgY29uZmlybUNhcmREZWxldGVQb3B1cC5zZXRTdWJtaXRIYW5kbGVyKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2l0ZUFwaS5kZWxldGVDYXJkKGNhcmQuaWQpO1xuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICBjb25maXJtQ2FyZERlbGV0ZVBvcHVwLmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBkZWxldGUgY2FyZDogXCIsIGVycik7XG4gICAgICBlcnJvck1lc3NhZ2VQb3B1cC5zZXRNZXNzYWdlKFxuICAgICAgICBgRXJyb3IgJHtlcnIuc3RhdHVzfS4gQ291bGQgbm90IGRlbGV0ZSBjYXJkLmBcbiAgICAgICk7XG4gICAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gICAgfVxuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTGlrZUJ1dHRvbkNsaWNrKGNhcmQsIGxpa2VCdXR0b25TdGF0ZUFjdGl2ZSkge1xuICBpZiAobGlrZUJ1dHRvblN0YXRlQWN0aXZlKSB7XG4gICAgcmV0dXJuIHNpdGVBcGkudW5saWtlQ2FyZChjYXJkLmlkKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yISBGYWlsZWQgdG8gdW5saWtlIGJ1dHRvbjogXCIsIGVycik7XG4gICAgICBlcnJvck1lc3NhZ2VQb3B1cC5zZXRNZXNzYWdlKFxuICAgICAgICBgRXJyb3IgJHtlcnIuc3RhdHVzfS4gQ291bGQgbm90IHVubGlrZSBjYXJkLmBcbiAgICAgICk7XG4gICAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHNpdGVBcGkubGlrZUNhcmQoY2FyZC5pZCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJFcnJvciEgRmFpbGVkIHRvIGxpa2UgYnV0dG9uOiBcIiwgZXJyKTtcbiAgICAgIGVycm9yTWVzc2FnZVBvcHVwLnNldE1lc3NhZ2UoYEVycm9yICR7ZXJyLnN0YXR1c30uIENvdWxkIG5vdCBsaWtlIGNhcmQuYCk7XG4gICAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vL2hhbmRsZSBmb3JtIHN1Ym1pdHMuIENsYXNzIGludGVyYWN0aW9ucyBoYW5kbGVkIHRocm91Z2ggbG9vc2UgY291cGxpbmdcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmZXRjaFJlcXVlc3QgPSBzaXRlQXBpLnVwZGF0ZVVzZXJJbmZvKHRpdGxlLCBkZXNjcmlwdGlvbik7XG4gICAgYXdhaXQgcHJvZmlsZUVkaXRQb3B1cC5hcHBseVNhdmluZ0FuaW1hdGlvbihmZXRjaFJlcXVlc3QpO1xuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICB1c2VyTmFtZTogdGl0bGUsXG4gICAgICB1c2VyRGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgIH0pO1xuICAgIHByb2ZpbGVUaXRsZVRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb25Ub29sdGlwSGFuZGxlci5oYW5kbGVUb29sdGlwKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIGluZm86IFwiLCBlcnIpO1xuICAgIGVycm9yTWVzc2FnZVBvcHVwLnNldE1lc3NhZ2UoXG4gICAgICBgRXJyb3IgJHtlcnIuc3RhdHVzfS4gRXJyb3Igc2V0dGluZyB1c2VyIGluZm8uYFxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KHsgdGl0bGUsIGltYWdlTGluayB9KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IHRpdGxlLCBsaW5rOiBpbWFnZUxpbmsgfTtcbiAgICBjb25zdCBmZXRjaFJlcXVlc3QgPSBzaXRlQXBpLmFkZENhcmQoY2FyZERhdGEpO1xuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBhZGRDYXJkUG9wdXAuYXBwbHlTYXZpbmdBbmltYXRpb24oZmV0Y2hSZXF1ZXN0KTtcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQsIFwicHJlcGVuZFwiKTtcbiAgICBjYXJkVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xuICAgIGZvcm1WYWxpZGF0b3JzW1wibW9kYWwtYWRkLWNhcmQtZm9ybVwiXS5yZXNldEZvcm1WYWxpZGF0aW9uKHRydWUpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IhIENvdWxkIG5vdCBhZGQgYSBjYXJkOiBcIiwgZXJyKTtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5zZXRNZXNzYWdlKGBFcnJvciAke2Vyci5zdGF0dXN9LiBDb3VsZCBub3QgYWRkIGNhcmQuYCk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVQcm9maWxlUGljdHVyZVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICB0cnkge1xuICAgIGNvbnN0IGZldGNoUmVxdWVzdCA9IHNpdGVBcGkuY2hhbmdlQXZhdGFyKGlucHV0VmFsdWVzLmltYWdlTGluayk7XG4gICAgYXdhaXQgcHJvZmlsZVBpY3R1cmVQb3B1cC5hcHBseVNhdmluZ0FuaW1hdGlvbihmZXRjaFJlcXVlc3QpO1xuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJJbWFnZVVybDogaW5wdXRWYWx1ZXMuaW1hZ2VMaW5rIH0pO1xuICAgIGZvcm1WYWxpZGF0b3JzW1wibW9kYWwtcHJvZmlsZS1waWN0dXJlLWZvcm1cIl0ucmVzZXRGb3JtVmFsaWRhdGlvbih0cnVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgY2hhbmdlIGF2YXRhciBpbWFnZTogXCIsIGVycik7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShcbiAgICAgIGBFcnJvciAke2Vyci5zdGF0dXN9LiBDb3VsZCBub3QgY2hhbmdlIHByb2ZpbGUgcGljdHVyZS5gXG4gICAgKTtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy9lZGl0IHByb2ZpbGUgYnV0dG9uIHBvcHVsYXRlcyB0aGUgaW5wdXRzIGFuZCBicmluZ3MgdXAgdGhlIG1vZGFsLlxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgaW5mb0Zyb21Vc2VyQ2xhc3MgPSBwcm9maWxlVXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICBjb25zdCBpbmZvRm9yUG9wdXBDbGFzcyA9IHtcbiAgICB0aXRsZTogaW5mb0Zyb21Vc2VyQ2xhc3MubmFtZSxcbiAgICBkZXNjcmlwdGlvbjogaW5mb0Zyb21Vc2VyQ2xhc3MuZGVzY3JpcHRpb24sXG4gIH07XG5cbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhpbmZvRm9yUG9wdXBDbGFzcyk7XG4gIGZvcm1WYWxpZGF0b3JzW1wibW9kYWwtcHJvZmlsZS1mb3JtXCJdLnJlc2V0Rm9ybVZhbGlkYXRpb24oZmFsc2UpO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL3Byb2ZpbGUgYWRkIGJ1dHRvbiBicmluZ3MgdXAgbW9kYWxcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL2NoZWNrIGZvciB0ZXh0IGVsbGlwc2lzIGFmdGVyIHJlc2l6aW5nXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gIGNhcmRUb29sdGlwSGFuZGxlci5oYW5kbGVUb29sdGlwKCk7XG4gIHByb2ZpbGVUaXRsZVRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xufSk7XG5cbi8vcHJvZmlsZSBwaWN0dXJlIG1vZGFsXG5wcm9maWxlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVBpY3R1cmVQb3B1cC5vcGVuKCk7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluaXRpYWxpemF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vL2hhdmUgaW5pdGlhbENhcmRzIHJlbmRlciBhbmQgZmV0Y2ggdXNlckluZm8gZnJvbSBBUEksIHRvIHNldCBpdCBpbiB0aGUgcHJvZmlsZVxuUHJvbWlzZS5hbGwoW2luaXRpYWxpemVDYXJkcygpLCBzZXRVc2VySW5mb0Zyb21BcGkoKV0pLnRoZW4oKCkgPT4ge1xuICAvL2NyZWF0ZSBpbml0aWFsIHRvb2x0aXBzIG9uIHBhZ2UgbG9hZFxuICBjYXJkVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xuICBwcm9maWxlVGl0bGVUb29sdGlwSGFuZGxlci5oYW5kbGVUb29sdGlwKCk7XG4gIHByb2ZpbGVEZXNjcmlwdGlvblRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgLy9lbmFibGUgZm9ybSB2YWxpZGF0aW9uXG4gIGVuYWJsZVZhbGlkYXRpb25PbkFsbEZvcm1zKGNvbmZpZ09iamVjdCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGFwaVNldHRpbmdzKSB7XG4gICAgdGhpcy5fYXBpU2V0dGluZ3MgPSBhcGlTZXR0aW5ncztcbiAgICB0aGlzLl9oZWFkZXJzID0gYXBpU2V0dGluZ3MuaGVhZGVycztcbiAgICB0aGlzLl9iYXNlVXJsID0gYXBpU2V0dGluZ3MuYmFzZVVybDtcbiAgICB0aGlzLl91c2VySW5mb1VybCA9IGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYDtcbiAgICB0aGlzLl9jYXJkc1VybCA9IGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYDtcbiAgICB0aGlzLl9hdmF0YXJVcmwgPSBgJHt0aGlzLl91c2VySW5mb1VybH0vYXZhdGFyYDtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gYXN5bmMgX3JlcXVlc3QodXJsLCBtZXRob2RUeXBlLCBvcHRpb25zKSB7XG4gIC8vICAgaWYgKG9wdGlvbnMpIHtcbiAgLy8gICAgIHJldHVybiBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgLy8gICAgICAgbWV0aG9kOiBtZXRob2RUeXBlLFxuICAvLyAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAvLyAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKSxcbiAgLy8gICAgIH0pO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICByZXR1cm4gYXdhaXQgZmV0Y2godXJsLCB7XG4gIC8vICAgICAgIG1ldGhvZDogbWV0aG9kVHlwZSxcbiAgLy8gICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgLy8gICAgIH0pO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLl9jYXJkc1VybCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICBjb25zdCBjYXJkc0FycmF5ID0gYXdhaXQgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIGNvbnNvbGUubG9nKGNhcmRzQXJyYXkpO1xuICAgIHJldHVybiBjYXJkc0FycmF5O1xuICB9XG5cbiAgLy9jYXJkRGF0YSBpcyBhbiBvYmplY3Qgd2l0aCBuYW1lIGFuZCBsaW5rIHByb3BlcnRpZXNcbiAgYXN5bmMgYWRkQ2FyZChjYXJkRGF0YSkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuX2NhcmRzVXJsLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKSxcbiAgICB9KTtcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIGNvbnNvbGUubG9nKGNhcmQpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9jYXJkc1VybH0vJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBhc3luYyBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9jYXJkc1VybH0vJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBhc3luYyB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2NhcmRzVXJsfS8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGFzeW5jIGZldGNoVXNlckluZm8oKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy5fdXNlckluZm9VcmwsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXJJbmZvKHVzZXJOYW1lLCB1c2VyQWJvdXQpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLl91c2VySW5mb1VybCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB1c2VyTmFtZSxcbiAgICAgICAgYWJvdXQ6IHVzZXJBYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBhc3luYyBjaGFuZ2VBdmF0YXIodXNlckxpbmspIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLl9hdmF0YXJVcmwsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiB1c2VyTGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIE9yaWdpbmFsIFVzZXIgSW5mbyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8vIHtcInVzZXJcIjp7XCJuYW1lXCI6XCJKYWNxdWVzIENvdXN0ZWF1XCIsXCJhYm91dFwiOlwiU2FpbG9yLCByZXNlYXJjaGVyXCIsXCJhdmF0YXJcIjpcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vZnJvbnRlbmQtZGV2ZWxvcGVyL2NvbW1vbi9hdmF0YXIuanBnXCIsXCJfaWRcIjpcImI1YzczZmQ1OWMzYjJhM2Q4YjczZTk0ZVwifSxcInRva2VuXCI6XCJjYjhmMzc2OC0xZTFhLTQ3YzgtYTBmNi1mNDc1NGY5YmFiODdcIn1cbi8vaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9mcm9udGVuZC1kZXZlbG9wZXIvY29tbW9uL2F2YXRhci5qcGdcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJ0aXRsZVwiKTtcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnMgaW4gdGhlIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgc3VwZXIub3BlbigpO1xuICAgIH07XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgc2V0U3VibWl0SGFuZGxlcihzdWJtaXRIYW5kbGVyKSB7XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICh0aGlzLl9zdWJtaXRIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic3VibWl0SGFuZGxlciBoYXMgbm90IGJlZW4gc2V0XCIpO1xuICAgICAgfVxuICAgICAgLy90aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhNZXNzYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fdGV4dE1lc3NhZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19oZWFkaW5nX3R5cGVfbWVzc2FnZVwiXG4gICAgKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBzZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5fdGV4dE1lc3NhZ2UudGV4dENvbnRlbnQgPT09IFwiXCIpIHtcbiAgICAgIHRoaXMuX3RleHRNZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdGV4dE1lc3NhZ2UuaW5uZXJIVE1MID1cbiAgICAgICAgdGhpcy5fdGV4dE1lc3NhZ2UudGV4dENvbnRlbnQgKyBcIjxicj48YnI+XCIgKyBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3RleHRNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCIvL2EgY2xhc3MgdGhhdCBoYW5kbGVzIDMgZWxlbWVudHMuIE9uZSB0aGF0IHJlcHJlc2VudHMgYSBuYW1lLCBvbmUgdGhhdCByZXByZXNlbnRzIGEgZGVzY3JpcHRpb24sIGFuZCBvbmUgdGhhdCByZXByZXNlbnRzIGEgdXNlciBpbWFnZVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGltYWdlU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW1hZ2VTZWxlY3Rvcik7XG4gIH1cblxuICAvL3JldHVybiBhbiBvYmplY3Qgd2l0aCB1c2VyJ3MgaW5mb1xuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpLFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudC50cmltKCksXG4gICAgICBpbWFnZUxpbms6IHRoaXMuX2ltYWdlRWxlbWVudC5zcmMsXG4gICAgfTtcbiAgfVxuICAvL3NldCB0aGUgMiBlbGVtZW50J3MgdGV4dENvbnRlbnQgdG8gcGFzc2VkLWluIGFyZ3VtZW50cywgYW5kIHRoZSB1cmwgZm9yIHRoZSBpbWFnZVxuICBzZXRVc2VySW5mbyh7IHVzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24sIHVzZXJJbWFnZVVybCB9KSB7XG4gICAgaWYgKHVzZXJOYW1lKSB7XG4gICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xuICAgIH1cbiAgICBpZiAodXNlckRlc2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGVzY3JpcHRpb247XG4gICAgfVxuICAgIGlmICh1c2VySW1hZ2VVcmwpIHtcbiAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB1c2VySW1hZ2VVcmw7XG4gICAgfVxuICAgIC8vaGFuZGxlIGVycm9ycyBpZiBpbWFnZSBjYW4ndCBsb2FkXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gXCIuLzhiNDUyMzkzMmU0OThlZTE5Mjg1LnBuZ1wiO1xuICAgICAgYWxlcnQoXCJJbnZhbGlkIFVSTC4gQ291bGQgbm90IGNoYW5nZSBpbWFnZSFcIik7XG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlVHJhc2hCdXR0b25DbGljayIsImhhbmRsZUxpa2VCdXR0b25DbGljayIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsImlkIiwiX2lkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZVRyYXNoQnV0dG9uQ2xpY2siLCJfaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsIl9jYXJkVGVtcGxhdGUiLCJfY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfbGlrZUJ1dHRvblN0YXRlQWN0aXZlIiwiaXNMaWtlZCIsIl9zZXRMaWtlQnV0dG9uU3RhdGUiLCJfYWRkTGlrZUZ1bmN0aW9uYWxpdHkiLCJhZGRFdmVudExpc3RlbmVyIiwiYXN5bmMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiX2Vycm9yQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudEltYWdlIiwiX3JlcGxhY2VXaXRoRXJyb3JDYXJkIiwiX2Vycm9yTWVzc2FnZSIsIl9lcnJvckNhcmRUZW1wbGF0ZSIsImZpcnN0RWxlbWVudENoaWxkIiwiX2Vycm9yQ2FyZE1lc3NhZ2UiLCJfZXJyb3JEZWxldGVCdXR0b24iLCJfZXJyb3JDYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsImlubmVyVGV4dCIsInJlcGxhY2VXaXRoIiwiZ2V0Q2FyZEVsZW1lbnQiLCJfY2FyZEVsZW1lbnRUaXRsZSIsInNldEF0dHJpYnV0ZSIsIm9uZXJyb3IiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJfaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfY2hlY2tBbGxGb3JtSW5wdXRzQXJlVmFsaWQiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJlbmFibGVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlU3VibWl0QnV0dG9uIiwiX3Nob3dFcnJvck1lc3NhZ2UiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9oYW5kbGVFcnJvclZpc2liaWxpdHkiLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVzZXQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJUb29sdGlwSGFuZGxlciIsInRleHRTZWxlY3RvciIsInRvb2x0aXBTZWxlY3RvciIsInVwZGF0ZVRleHQiLCJfdGV4dFNlbGVjdG9yIiwiX3Rvb2x0aXBTZWxlY3RvciIsIl91cGRhdGVUZXh0IiwiaGFuZGxlVG9vbHRpcCIsImVsdCIsImVsbGlwc2lzRXhpc3RzIiwic2Nyb2xsV2lkdGgiLCJjbGllbnRXaWR0aCIsInRvb2x0aXBJc09wZW4iLCJwYXJlbnROb2RlIiwidG9vbHRpcCIsImNyZWF0ZUVsZW1lbnQiLCJzbGljZSIsImFmdGVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJwbGFjZW1lbnQiLCJpdGVtIiwiYWRkSXRlbSIsIml0ZW1FbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2NsaWNrVG9DbG9zZU1vZGFsIiwiZXZlbnQiLCJ0YXJnZXQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dE9iamVjdCIsIl9pbnB1dEVsZW1lbnRzIiwiX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0IiwiZ2V0SW5wdXRFbGVtZW50cyIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRJbnB1dEVsZW1lbnRBdHRyaWJ1dGVOYW1lcyIsImF0dHJpYnV0ZU5hbWVzIiwicHVzaCIsIl9jaGFuZ2VTdWJtaXRCdXR0b25UZXh0IiwidGV4dCIsImFwcGx5U2F2aW5nQW5pbWF0aW9uIiwiZmV0Y2hSZXF1ZXN0IiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZldGNoUmVzdWx0IiwiXyIsImFsbCIsImVyciIsImNvbnRhaW5zIiwicHJldmVudERlZmF1bHQiLCJjb25maWdPYmplY3QiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlSW1hZ2UiLCJmb3JtVmFsaWRhdG9ycyIsInNpdGVBcGkiLCJhcGlTZXR0aW5ncyIsIl9hcGlTZXR0aW5ncyIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl91c2VySW5mb1VybCIsIl9jYXJkc1VybCIsIl9hdmF0YXJVcmwiLCJfY2hlY2tSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwicmVqZWN0IiwiZ2V0SW5pdGlhbENhcmRzIiwicmVzIiwiZmV0Y2giLCJjYXJkc0FycmF5IiwiYWRkQ2FyZCIsImNhcmREYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwiZmV0Y2hVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJhYm91dCIsImNoYW5nZUF2YXRhciIsInVzZXJMaW5rIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmRUb29sdGlwSGFuZGxlciIsInByb2ZpbGVUaXRsZVRvb2x0aXBIYW5kbGVyIiwicHJvZmlsZURlc2NyaXB0aW9uVG9vbHRpcEhhbmRsZXIiLCJjYXJkU2VjdGlvbiIsInByb2ZpbGVFZGl0UG9wdXAiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJvZmlsZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJ1c2VyRGVzY3JpcHRpb24iLCJlcnJvck1lc3NhZ2VQb3B1cCIsInNldE1lc3NhZ2UiLCJzdGF0dXMiLCJhZGRDYXJkUG9wdXAiLCJfcmVmMiIsImltYWdlTGluayIsImVycm9yIiwiaW1hZ2VQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJzcmMiLCJhbHQiLCJvbmxvYWQiLCJjb25maXJtQ2FyZERlbGV0ZVBvcHVwIiwic2V0U3VibWl0SGFuZGxlciIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsInByb2ZpbGVQaWN0dXJlUG9wdXAiLCJpbnB1dFZhbHVlcyIsInVzZXJJbWFnZVVybCIsIl90ZXh0TWVzc2FnZSIsIm1lc3NhZ2UiLCJpbm5lckhUTUwiLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiaW1hZ2VTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfaW1hZ2VFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ0cmltIiwiYWxlcnQiLCJjcmVhdGVDYXJkIiwibGlrZUJ1dHRvblN0YXRlQWN0aXZlIiwiY2F0Y2giLCJpbmZvRnJvbVVzZXJDbGFzcyIsImluZm9Gb3JQb3B1cENsYXNzIiwid2luZG93IiwiaW5pdGlhbENhcmRzIiwiaW5pdGlhbGl6ZUNhcmRzIiwiYXBpVXNlckluZm8iLCJzZXRVc2VySW5mb0Zyb21BcGkiLCJ0aGVuIiwiY29uZmlnIiwiZm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==