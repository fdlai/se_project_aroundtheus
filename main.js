!function(){"use strict";class t{constructor(t,e,s,i,r){this._data=t,this._name=t.name,this._link=t.link,this.id=t._id,this._cardSelector=e,this._handleImageClick=s,this._handleTrashButtonClick=i,this._handleLikeButtonClick=r,this._template=document.querySelector(this._cardSelector).content,this._cardTemplate=this._template.querySelector(".card"),this._cardElement=this._cardTemplate.cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButtonStateActive=t.isLiked,this._setLikeButtonState()}_addLikeFunctionality(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButtonClick(this,this._likeButtonStateActive),this._likeButtonStateActive=!this._likeButtonStateActive,this._setLikeButtonState()}))}_setLikeButtonState(){this._likeButtonStateActive?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}deleteCard(){this._errorCard&&this._errorCard.remove(),this._cardElement.remove()}_setEventListeners(){this._addLikeFunctionality(),this._deleteButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._cardElementImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_replaceWithErrorCard(){this._errorMessage="Image has failed to load",this._errorCardTemplate=document.querySelector("#error-card-template").content.firstElementChild,this._errorCard=this._errorCardTemplate.cloneNode(!0),this._errorCardMessage=this._errorCard.querySelector(".card__error-message"),this._errorDeleteButton=this._errorCard.querySelector(".card__delete-button"),this._errorCardTitle=this._errorCard.querySelector(".card__title"),this._errorCardMessage.textContent=this._errorMessage,this._errorCardTitle.textContent=this._cardElement.innerText?this._cardElement.textContent:"...",this._errorDeleteButton.addEventListener("click",(()=>{this._handleTrashButtonClick(this)})),this._cardElement.replaceWith(this._errorCard)}getCardElement(){return this._cardElementTitle=this._cardElement.querySelector(".card__title"),this._cardElementImage=this._cardElement.querySelector(".card__image"),this._cardElementTitle.textContent=this._name,this._cardElementImage.setAttribute("src",`${this._link}`),this._cardElementImage.setAttribute("alt",`${this._name}`),this._setEventListeners(),this._cardElementImage.onerror=()=>this._replaceWithErrorCard(),this._cardElement}}class e{constructor(t,e){this._settings=t,this._form=e,this._inputs=[...this._form.querySelectorAll(this._settings.inputSelector)],this._submitButton=this._form.querySelector(this._settings.submitButtonSelector)}_checkAllFormInputsAreValid(){return this._inputs.every((t=>t.validity.valid))}disableSubmitButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}enableSubmitButton(){this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_toggleSubmitButton(){this._checkAllFormInputsAreValid()?this.enableSubmitButton():this.disableSubmitButton()}_showErrorMessage(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent=t.validationMessage,e.classList.add(this._settings.errorClass),t.classList.add(this._settings.inputErrorClass)}_hideErrorMessage(t){this._form.querySelector(`#${t.id}-error`).classList.remove(this._settings.errorClass),t.classList.remove(this._settings.inputErrorClass)}_handleErrorVisibility(t){t.validity.valid?this._hideErrorMessage(t):this._showErrorMessage(t)}resetFormValidation(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._form.reset(),this._toggleSubmitButton(),this._inputs.forEach((t=>{this._hideErrorMessage(t)}))}enableValidation(){this._inputs.forEach((t=>{t.addEventListener("input",(e=>{this._toggleSubmitButton(),this._handleErrorVisibility(t)}))}))}}class s{constructor(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._textSelector=t,this._tooltipSelector=e,this._updateText=s}handleTooltip(){document.querySelectorAll(this._textSelector).forEach((t=>{const e=t.scrollWidth>t.clientWidth,s=t.parentNode.querySelector(this._tooltipSelector);if(e&&!s){const e=document.createElement("p");e.classList.add(this._tooltipSelector.slice(1)),e.textContent=t.textContent,t.after(e)}else e&&s&&this._updateText?t.nextElementSibling.textContent=t.innerText:!e&&s&&t.nextElementSibling.remove()}))}}class i{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"append";this._items.forEach((e=>{this.addItem(e,t)}))}addItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const s=this._renderer(t);switch(e){case"append":this._container.append(s);break;case"prepend":this._container.prepend(s);break;default:console.log("Error. Please use only 'append' or 'prepend'.")}}}class r{constructor(t){this._popupSelector=t,this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.classList.add("modal_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("modal_opened")}_clickToCloseModal(t){t.target!==this._popupElement&&t.target!==this._closeButton||this.close()}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{this._clickToCloseModal(t)}))}}class o extends r{constructor(t,e){super(t),this._handleFormSubmit=e,this._formElement=this._popupElement.querySelector(".modal__form"),this._inputObject={},this._inputElements=[...this._popupElement.querySelectorAll(".modal__input")],this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._defaultSubmitButtonText=this._submitButton.textContent,this.setEventListeners()}getInputElements(){return this._inputElements}_getInputValues(){return this._inputElements.forEach((t=>{this._inputObject[t.name]=t.value})),this._inputObject}setInputValues(t){this._inputElements.forEach((e=>{e.value=t[e.name]}))}getInputElementAttributeNames(){const t=[];return this._inputElements.forEach((e=>{t.push(e.name)})),t}_changeSubmitButtonText(t){this._submitButton.textContent=t}async applySavingAnimation(t){function e(t){return new Promise((e=>setTimeout(e,t)))}this._submitButton.classList.add("modal__submit-button_hover_disabled"),this._submitButton.classList.add("modal__submit-button_animation_active");const[s,i]=await Promise.all([t,e(1200)]);return this._submitButton.classList.remove("modal__submit-button_animation_active"),this._submitButton.classList.add("modal__submit-button_saved"),await e(180),this._submitButton.classList.remove("modal__submit-button_hover_disabled"),s}open(){this._submitButton.textContent!==this._defaultSubmitButtonText&&this._changeSubmitButtonText(this._defaultSubmitButtonText),this._submitButton.classList.contains("modal__submit-button_saved")&&this._submitButton.classList.remove("modal__submit-button_saved"),super.open()}setEventListeners(){this._formElement.addEventListener("submit",(async t=>{t.preventDefault(),await this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},a=document.querySelector("#profile-edit-button"),l=document.querySelector("#profile-add-button"),c=document.querySelector(".profile__image"),d={},h=new class{constructor(t){this._apiSettings=t,this._headers=t.headers,this._baseUrl=t.baseUrl,this._userInfoUrl=`${this._baseUrl}/users/me`,this._cardsUrl=`${this._baseUrl}/cards`,this._avatarUrl=`${this._userInfoUrl}/avatar`}_checkResponse(t){if(!t.ok)throw t}async getInitialCards(){try{const t=await fetch(this._cardsUrl,{headers:this._headers});this._checkResponse(t);const e=await t.json();return console.log(e),e}catch(t){throw console.log("Failed to get cards: ",t),new Error(t.status)}}async addArrayOfCards(t){t.forEach((async t=>{this.addCard(t)}))}async addCard(t){try{const e=await fetch(this._cardsUrl,{method:"POST",headers:this._headers,body:JSON.stringify(t)});this._checkResponse(e);const s=await e.json();return console.log(s),s}catch(e){throw console.error("Error! Could not add a card: ",e,t),new Error(e.status)}}async deleteCard(t){try{const e=await fetch(`${this._cardsUrl}/${t}`,{method:"DELETE",headers:this._headers});this._checkResponse(e);const s=await e.json();return console.log(s),e}catch(e){throw console.log("Failed to delete card: ",e,t),new Error(e.status)}}async likeCard(t){try{const e=await fetch(`${this._cardsUrl}/${t}/likes`,{method:"PUT",headers:this._headers});this._checkResponse(e);const s=await e.json();return console.log(s),e}catch(e){throw console.log("Error! Failed to like button: ",e,t),new Error(e.status)}}async unlikeCard(t){try{const e=await fetch(`${this._cardsUrl}/${t}/likes`,{method:"DELETE",headers:this._headers});this._checkResponse(e);const s=await e.json();return console.log(s),e}catch(e){throw console.log("Error! Failed to unlike button: ",e,t),new Error(e.status)}}async fetchUserInfo(){try{const t=await fetch(this._userInfoUrl,{headers:this._headers});this._checkResponse(t);const e=await t.json();return console.log(e),e}catch(t){throw console.log("Failed to get user info: ",t),new Error(t.status)}}async updateUserInfo(t,e){try{const s=await fetch(this._userInfoUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})});this._checkResponse(s);const i=await s.json();return console.log(i),i}catch(s){throw console.log("Failed to update user info: ",s,t,e),new Error(s.status)}}async changeAvatar(t){try{const e=await fetch(this._avatarUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})});this._checkResponse(e);const s=await e.json();return console.log(s),s}catch(e){throw console.log("Could not change avatar image: ",e,t),new Error(e.status)}}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"cb8f3768-1e1a-47c8-a0f6-f4754f9bab87","Content-Type":"application/json"}}),u=new s(".card__title",".card__tooltip",!1),_=new s("#profile-title",".profile__tooltip-title"),m=new s("#profile-description",".profile__tooltip-description");let p;const E=new o("#modal-edit-profile",(async function(t){let{title:e,description:s}=t;try{const t=h.updateUserInfo(e,s);await E.applySavingAnimation(t),S.setUserInfo({userName:e,userDescription:s}),_.handleTooltip(),m.handleTooltip()}catch(t){v.setMessage(`${t}. Error setting user info.`),v.open()}})),g=new o("#modal-add-card",(async function(t){let{title:e,imageLink:s}=t;try{const t={name:e,link:s},i=h.addCard(t),r=await g.applySavingAnimation(i);p.addItem(r,"prepend"),u.handleTooltip(),d["modal-add-card-form"].resetFormValidation(!0)}catch(t){v.setMessage(`${t}. Could not add card.`),v.open()}})),b=new class extends r{constructor(t){super(t),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__subtitle"),this.setEventListeners()}open(t){let{name:e,link:s}=t;this._popupImage.src=s,this._popupImage.alt=e,this._popupTitle.textContent=e,this._popupImage.onload=()=>{super.open()}}}("#modal-picture"),f=new class extends r{constructor(t){super(t),this._submitButton=this._popupElement.querySelector(".modal__submit-button"),this._form=this._popupElement.querySelector(".modal__form"),this._setEventListeners()}setSubmitHandler(t){this._submitHandler=t}_setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._submitHandler?this._submitHandler():console.log("submitHandler has not been set"),this.close()}))}}("#modal-card-delete"),y=new o("#modal-profile-picture",(async function(t){try{const e=h.changeAvatar(t.imageLink);await y.applySavingAnimation(e),S.setUserInfo({userImageUrl:t.imageLink}),d["modal-profile-picture-form"].resetFormValidation(!0)}catch(t){v.setMessage(`${t}. Could not change profile picture.`),v.open()}})),v=new class extends r{constructor(t){super(t),this._textMessage=this._popupElement.querySelector(".modal__heading"),this.setEventListeners()}setMessage(t){this._textMessage.textContent=t}}("#modal-message"),S=new class{constructor(t,e,s){this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(e),this._imageElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent.trim(),description:this._descriptionElement.textContent.trim(),imageLink:this._imageElement.src}}setUserInfo(t){let{userName:e,userDescription:s,userImageUrl:i}=t;e&&(this._nameElement.textContent=e),s&&(this._descriptionElement.textContent=s),i&&(this._imageElement.src=i),this._imageElement.onerror=()=>{this._imageElement.src="./8b4523932e498ee19285.png",alert("Invalid URL. Could not change image!")}}}("#profile-title","#profile-description",".profile__image");function C(e){const s=new t(e,"#card-template",(t=>b.open(t)),k,w);return s.getCardElement()}async function k(t){try{f.open(),f.setSubmitHandler((async()=>{await h.deleteCard(t.id),t.deleteCard()}))}catch(t){v.setMessage(`${t}. Could not delete card.`),v.open()}}async function w(t,e){try{e?h.unlikeCard(t.id):h.likeCard(t.id)}catch(t){v.setMessage(`${t}. Could not like/unlike card.`),v.open()}}a.addEventListener("click",(()=>{const t=S.getUserInfo(),e={title:t.name,description:t.description};E.setInputValues(e),d["modal-profile-form"].resetFormValidation(!1),E.open()})),l.addEventListener("click",(()=>{g.open()})),window.addEventListener("resize",(()=>{u.handleTooltip(),_.handleTooltip(),m.handleTooltip()})),c.addEventListener("click",(()=>{y.open()})),Promise.all([async function(){try{const t=await h.getInitialCards();p=new i({items:t,renderer:C},".cards__list"),p.renderItems()}catch(t){v.setMessage(`${t}. Could not retrieve cards.`),v.open()}}(),async function(){try{const t=await h.fetchUserInfo();S.setUserInfo({userName:t.name,userDescription:t.about,userImageUrl:t.avatar})}catch(t){v.setMessage(`${t}. Could not retrieve user info.`),v.open()}}()]).then((()=>{var t;u.handleTooltip(),_.handleTooltip(),m.handleTooltip(),t=n,[...document.querySelectorAll(t.formSelector)].forEach((s=>{const i=new e(t,s),r=s.getAttribute("name");d[r]=i,i.enableValidation()}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUJ6SCxnQkFDbkIwSCxFQUEyQjFILGdCQUMzQjJILEVBQWlDM0gsZ0JBNUpDMEssRUE4SlBqRyxFQTdKYixJQUFJdEosU0FBU3dDLGlCQUFpQitNLEVBQU9oRyxlQUM3Q3BGLFNBQVMvQixJQUNiLE1BQU1vTixFQUFnQixJQUFJdE4sRUFBY3FOLEVBQVFuTixHQUMxQ3FOLEVBQVdyTixFQUFLc04sYUFBYSxRQUVuQy9GLEVBQWU4RixHQUFZRCxFQUMzQkEsRUFBY3BMLGtCQUFrQixHQXVKTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1Rvb2x0aXBIYW5kbGVyLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aE1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrXG4gICkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uQ2xpY2sgPSBoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50O1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvblN0YXRlQWN0aXZlID0gZGF0YS5pc0xpa2VkO1xuICAgIHRoaXMuX3NldExpa2VCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgLy9saWtlLWJ1dHRvbiBmdW5jdGlvbmFsaXR5XG4gIF9hZGRMaWtlRnVuY3Rpb25hbGl0eSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2sodGhpcywgdGhpcy5fbGlrZUJ1dHRvblN0YXRlQWN0aXZlKTtcbiAgICAgIC8vZmxpcCB0aGUgc3RhdGUgb2YgdGhlIGxpa2UgYnV0dG9uXG4gICAgICB0aGlzLl9saWtlQnV0dG9uU3RhdGVBY3RpdmUgPSAhdGhpcy5fbGlrZUJ1dHRvblN0YXRlQWN0aXZlO1xuXG4gICAgICB0aGlzLl9zZXRMaWtlQnV0dG9uU3RhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vbWFpbnRhaW4gdGhlIHN0YXRlIG9mIHRoZSBsaWtlIGJ1dHRvblxuICBfc2V0TGlrZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9saWtlQnV0dG9uU3RhdGVBY3RpdmUpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgaWYgKHRoaXMuX2Vycm9yQ2FyZCkge1xuICAgICAgdGhpcy5fZXJyb3JDYXJkLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9hZGRMaWtlRnVuY3Rpb25hbGl0eSgpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdXR0b25DbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLy9yZXBsYWNlcyBjYXJkIHdpdGggZXJyb3ItY2FyZFxuICBfcmVwbGFjZVdpdGhFcnJvckNhcmQoKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlID0gXCJJbWFnZSBoYXMgZmFpbGVkIHRvIGxvYWRcIjtcbiAgICB0aGlzLl9lcnJvckNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNlcnJvci1jYXJkLXRlbXBsYXRlXCJcbiAgICApLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgdGhpcy5fZXJyb3JDYXJkID0gdGhpcy5fZXJyb3JDYXJkVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2Vycm9yQ2FyZE1lc3NhZ2UgPSB0aGlzLl9lcnJvckNhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2Vycm9yLW1lc3NhZ2VcIlxuICAgICk7XG4gICAgdGhpcy5fZXJyb3JEZWxldGVCdXR0b24gPSB0aGlzLl9lcnJvckNhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fZXJyb3JDYXJkVGl0bGUgPSB0aGlzLl9lcnJvckNhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9lcnJvckNhcmRNZXNzYWdlLnRleHRDb250ZW50ID0gdGhpcy5fZXJyb3JNZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yQ2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQuaW5uZXJUZXh0XG4gICAgICA/IHRoaXMuX2NhcmRFbGVtZW50LnRleHRDb250ZW50XG4gICAgICA6IFwiLi4uXCI7XG4gICAgLy90aGlzLl9hZGREZWxldGVGdW5jdGlvbmFsaXR5KHRoaXMuX2Vycm9yRGVsZXRlQnV0dG9uLCB0aGlzLl9lcnJvckNhcmQpO1xuICAgIHRoaXMuX2Vycm9yRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbkNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlcGxhY2VXaXRoKHRoaXMuX2Vycm9yQ2FyZCk7XG4gIH1cblxuICAvL2NyZWF0ZSBjYXJkLCBnaXZlIGl0IGl0cyBuYW1lIGFuZCBpbWFnZVxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudEltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBgJHt0aGlzLl9saW5rfWApO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50SW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGAke3RoaXMuX25hbWV9YCk7XG5cbiAgICAvL2FkZCBsaWtlLCBkZWxldGUgYW5kIHBpY3R1cmUtbW9kYWwgZnVuY3Rpb25hbGl0eVxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvL3VzZSBlcnJvci1jYXJkIGlmIHRoZSBpbWFnZSBmYWlscyB0byBsb2FkXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRJbWFnZS5vbmVycm9yID0gKCkgPT4gdGhpcy5fcmVwbGFjZVdpdGhFcnJvckNhcmQoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dHMgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICAvL3JldHVybnMgdHJ1ZSBpZiBhbGwgaW5wdXRzIGluIHRoZSBmb3JtIGFyZSB2YWxpZFxuICBfY2hlY2tBbGxGb3JtSW5wdXRzQXJlVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8vZGlzYWJsZXMgb3IgZW5hYmxlcyBzdWJtaXQtYnV0dG9uIHdoZXRoZXIgYW55IGlucHV0IGluIHRoZSBmb3JtIGlzIGludmFsaWQgb3Igbm90XG4gIF90b2dnbGVTdWJtaXRCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrQWxsRm9ybUlucHV0c0FyZVZhbGlkKCkpIHtcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8vZGlzcGxheSBlcnJvciBtZXNzYWdlcyBmb3IgYSBwYXJ0aWN1bGFyIGlucHV0IGVsZW1lbnRcbiAgX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL3JlbW92ZSBlcnJvciBtZXNzYWdlcyBmb3IgYSBwYXJ0aWN1bGFyIGlucHV0IGVsZW1lbnRcbiAgX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vZGlzcGxheSBvciByZW1vdmUgZXJyb3IgbWVzc2FnZXMgZnJvbSBhbiBpbnB1dCBlbGVtZW50LCB3aGV0aGVyIHRoZSBpbnB1dCBpcyB2YWxpZCBvciBub3RcbiAgX2hhbmRsZUVycm9yVmlzaWJpbGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvL3Jlc2V0IHZhbGlkYXRpb24gb2YgdGhlIGZvcm0uIElmIHBhcmFtZXRlciAnZW1wdHlJbnB1dHMnIGlzIHRydWUgPT4gdGhlbiBlbXB0eSB0aGUgZm9ybSdzIGlucHV0c1xuICByZXNldEZvcm1WYWxpZGF0aW9uKGVtcHR5SW5wdXRzID0gdHJ1ZSkge1xuICAgIGlmIChlbXB0eUlucHV0cykge1xuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH1cbiAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgLy9zZXQgYW4gaW5wdXQtdmFsaWRhdGlvbiBldmVudCBsaXN0ZW5lciBvbiBlYWNoIGlucHV0IGVsZW1lbnQgd2l0aGluIHRoZSBmb3JtXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uKCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yVmlzaWJpbGl0eShpbnB1dCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9vbHRpcEhhbmRsZXIge1xuICAvL2JvdGggc2VsZWN0b3JzIHNob3VsZCBpbmNsdWRlIHRoZWlyIC4gb3IgI1xuICBjb25zdHJ1Y3Rvcih0ZXh0U2VsZWN0b3IsIHRvb2x0aXBTZWxlY3RvciwgdXBkYXRlVGV4dCA9IHRydWUpIHtcbiAgICB0aGlzLl90ZXh0U2VsZWN0b3IgPSB0ZXh0U2VsZWN0b3I7XG4gICAgdGhpcy5fdG9vbHRpcFNlbGVjdG9yID0gdG9vbHRpcFNlbGVjdG9yO1xuICAgIHRoaXMuX3VwZGF0ZVRleHQgPSB1cGRhdGVUZXh0O1xuICB9XG5cbiAgaGFuZGxlVG9vbHRpcCgpIHtcbiAgICBjb25zdCB0ZXh0RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3RleHRTZWxlY3Rvcik7XG4gICAgdGV4dEVsZW1lbnRzLmZvckVhY2goKGVsdCkgPT4ge1xuICAgICAgY29uc3QgZWxsaXBzaXNFeGlzdHMgPSBlbHQuc2Nyb2xsV2lkdGggPiBlbHQuY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCB0b29sdGlwSXNPcGVuID0gZWx0LnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcih0aGlzLl90b29sdGlwU2VsZWN0b3IpO1xuICAgICAgaWYgKGVsbGlwc2lzRXhpc3RzICYmICF0b29sdGlwSXNPcGVuKSB7XG4gICAgICAgIGNvbnN0IHRvb2x0aXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgdG9vbHRpcC5jbGFzc0xpc3QuYWRkKHRoaXMuX3Rvb2x0aXBTZWxlY3Rvci5zbGljZSgxKSk7XG4gICAgICAgIHRvb2x0aXAudGV4dENvbnRlbnQgPSBlbHQudGV4dENvbnRlbnQ7XG4gICAgICAgIGVsdC5hZnRlcih0b29sdGlwKTtcbiAgICAgIH0gZWxzZSBpZiAoZWxsaXBzaXNFeGlzdHMgJiYgdG9vbHRpcElzT3BlbiAmJiB0aGlzLl91cGRhdGVUZXh0KSB7XG4gICAgICAgIGNvbnN0IHRvb2x0aXAgPSBlbHQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB0b29sdGlwLnRleHRDb250ZW50ID0gZWx0LmlubmVyVGV4dDtcbiAgICAgIH0gZWxzZSBpZiAoIWVsbGlwc2lzRXhpc3RzICYmIHRvb2x0aXBJc09wZW4pIHtcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGVsdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHRvb2x0aXAucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vaGFuZGxlcyBzZWN0aW9ucyBvZiB0aGUgcGFnZSBieSB0YWtpbmcgaW4gZGF0YSwgY29udmVydGluZyBpdCB0byBIVE1MIGFuZCBwbGFjaW5nIGl0IG9uIHRoZSBwYWdlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOyAvL2FuIGFycmF5IG9mIGl0ZW1zIHRoYXQgYmVsb25ncyBpbiB0aGUgc2VjdGlvblxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vdGhlIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgZWFjaCBpdGVtIHRvIGFuIGh0bWwgZWxlbWVudFxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpOyAvL3RoZSBwbGFjZSB0aGF0IGNvbnRhaW5zIHRoZSBpdGVtc1xuICB9XG4gIC8vcmVuZGVyIGFuIGFycmF5IG9mIGl0ZW0gZGF0YSB0byB0aGUgcGFnZVxuICByZW5kZXJJdGVtcyhwbGFjZW1lbnQgPSBcImFwcGVuZFwiKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0sIHBsYWNlbWVudCk7XG4gICAgfSk7XG4gIH1cbiAgLy90dXJuIGl0ZW0gdG8gZWxlbWVudCBhbmQgYXBwZW5kIG9yIHByZXBlbmQgZWxlbWVudCB0byBjb250YWluZXJcbiAgYWRkSXRlbShpdGVtLCBwbGFjZW1lbnQgPSBcImFwcGVuZFwiKSB7XG4gICAgY29uc3QgaXRlbUVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICBzd2l0Y2ggKHBsYWNlbWVudCkge1xuICAgICAgY2FzZSBcImFwcGVuZFwiOlxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGl0ZW1FbGVtZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicHJlcGVuZFwiOlxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtRWxlbWVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvci4gUGxlYXNlIHVzZSBvbmx5ICdhcHBlbmQnIG9yICdwcmVwZW5kJy5cIik7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICB9XG4gIC8vb3BlbnMgcG9wdXBcbiAgb3BlbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIH1cbiAgLy9jbG9zZXMgcG9wdXBcbiAgY2xvc2UoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICB9XG4gIC8vY2xvc2VzIHBvcHVwIHdoZW4gY2xpY2tpbmcgWCBvciBvdmVybGF5XG4gIF9jbGlja1RvQ2xvc2VNb2RhbChldmVudCkge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50IHx8XG4gICAgICBldmVudC50YXJnZXQgPT09IHRoaXMuX2Nsb3NlQnV0dG9uXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIC8vY2xvc2UgcG9wdXAgd2l0aCBFc2Mga2V5XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG4gIC8vc2V0IGV2ZW50IGxpc3RlbmVycyB0byBjbG9zZSBwb3B1cCB3aGVuIGNsaWNraW5nIFggb3IgdGhlIG92ZXJsYXlcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgIHRoaXMuX2NsaWNrVG9DbG9zZU1vZGFsKGUpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRPYmplY3QgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuICAgICAgLi4udGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpLFxuICAgIF07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9kZWZhdWx0U3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgICAvL3NldCBldmVudCBsaXN0ZW5lcnMgaW4gdGhlIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIC8vcmV0dXJuIGFycmF5IG9mIGFsbCBpbnB1dCBlbGVtZW50c1xuICBnZXRJbnB1dEVsZW1lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzO1xuICB9XG4gIC8vcmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSB1c2VyLWlucHV0dGVkIHRleHRcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2lucHV0T2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0T2JqZWN0O1xuICB9XG4gIC8vc2V0IHRoZSB1c2VyLXR5cGVkLWluIHRleHQgY29udGVudCBvZiB0aGUgaW5wdXQgZWxlbWVudHNcbiAgLy9kYXRhIGlzIGFuIG9iamVjdCB3aXRoIGtleW5hbWVzIGVxdWFsIHRvIHRoZSBuYW1lIGF0dHJpYnV0ZSBvbiBlYWNoIGlucHV0IGVsZW1lbnRcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldElucHV0RWxlbWVudEF0dHJpYnV0ZU5hbWVzKCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWVzID0gW107XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgYXR0cmlidXRlTmFtZXMucHVzaChpbnB1dC5uYW1lKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXR0cmlidXRlTmFtZXM7XG4gIH1cblxuICBfY2hhbmdlU3VibWl0QnV0dG9uVGV4dCh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG4gIC8vdGFrZXMgYSBwcm9taXNlICdmZXRjaFJlcXVlc3QnLCBhbmQgcnVucyBhIHNhdmluZyBhbmltYXRpb24gb24gdGhlIHN1Ym1pdCBidXR0b24sIHdoaWNoIHJ1bnMgYSBtaW5pbXVtIHRpbWUsIGFuZCBkb2Vzbid0IGNvbXBsZXRlIHVudGlsIGZldGNoUmVxdWVzdCBjb21wbGV0ZXNcbiAgYXN5bmMgYXBwbHlTYXZpbmdBbmltYXRpb24oZmV0Y2hSZXF1ZXN0KSB7XG4gICAgZnVuY3Rpb24gZGVsYXkobXMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICAgIH1cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2hvdmVyX2Rpc2FibGVkXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX3N1Ym1pdC1idXR0b25fYW5pbWF0aW9uX2FjdGl2ZVwiKTtcbiAgICBjb25zdCBbZmV0Y2hSZXN1bHQsIF9dID0gYXdhaXQgUHJvbWlzZS5hbGwoW2ZldGNoUmVxdWVzdCwgZGVsYXkoMTIwMCldKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFwibW9kYWxfX3N1Ym1pdC1idXR0b25fYW5pbWF0aW9uX2FjdGl2ZVwiXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnV0dG9uX3NhdmVkXCIpO1xuICAgIGF3YWl0IGRlbGF5KDE4MCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9ob3Zlcl9kaXNhYmxlZFwiKTtcbiAgICByZXR1cm4gZmV0Y2hSZXN1bHQ7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgIT09IHRoaXMuX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0KSB7XG4gICAgICB0aGlzLl9jaGFuZ2VTdWJtaXRCdXR0b25UZXh0KHRoaXMuX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9zYXZlZFwiKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9zYXZlZFwiKTtcbiAgICB9XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9hZGQgdGhlIHN1Ym1pdCBldmVudCBoYW5kbGVyIHRvIHRoZSBmb3JtXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgLy90aGlzLl9jaGFuZ2VTdWJtaXRCdXR0b25UZXh0KFwiU2F2aW5nLi4uXCIpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYXdhaXQgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJFbCBDYXBpdGFuXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQyNjYwNDk2Njg0OC1kN2FkYWM0MDJiZmY/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTAwMCZxPTgwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIldhbmFrYSwgTmV3IFplYWxhbmRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3LndhbGxwYXBlcnVwLmNvbS91cGxvYWRzL3dhbGxwYXBlcnMvMjAxMy8wOS8yNS8xNTEzNjUvMzQ4ZjNjNDliNWU1ZDc4YmFlNzcyNTc4ZGMxZTlkMzYuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgQXRpdGxcXHUwMEUxblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly93d3cucm9hZGFmZmFpci5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTcvMTAvbGFrZS1hdGl0bGFuLWd1YXRlbWFsYS1zaHV0dGVyc3RvY2tfMTg5NjQ5MjQ0LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYW5mZiwgQ2FuYWRhXCIsXG4gICAgbGluazogXCJodHRwczovL2kyLndwLmNvbS93d3cuZXJpa2FzdHJhdmVscy5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTUvMTEvUDExNzAzMjcuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdyYW5kIENhbnlvblwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly93d3cud2FsbHBhcGVyZmxhcmUuY29tL3N0YXRpYy8xNS8xOTMvMjY2L2FyY2hlcy1uYXRpb25hbC1wYXJrLXV0YWgtcm9jay1uYXR1cmUtd2FsbHBhcGVyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbWF6b24gUmFpbmZvcmVzdFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9mb3VuZHRoZXdvcmxkLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxNS8xMi9BbWF6b24tUmFpbmZvcmVzdC05LmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZ09iamVjdCA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBhcGlTZXR0aW5ncyA9IHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJjYjhmMzc2OC0xZTFhLTQ3YzgtYTBmNi1mNDc1NGY5YmFiODdcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFRvb2x0aXBIYW5kbGVyIGZyb20gXCIuLi9jb21wb25lbnRzL1Rvb2x0aXBIYW5kbGVyLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoTWVzc2FnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhNZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIGNvbmZpZ09iamVjdCwgYXBpU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG4vL2ltcG9ydCB7emlwT2JqZWN0fSBmcm9tIFwibG9kYXNoXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IHNpdGVBcGkgPSBuZXcgQXBpKGFwaVNldHRpbmdzKTtcblxuY29uc3QgY2FyZFRvb2x0aXBIYW5kbGVyID0gbmV3IFRvb2x0aXBIYW5kbGVyKFxuICBcIi5jYXJkX190aXRsZVwiLFxuICBcIi5jYXJkX190b29sdGlwXCIsXG4gIGZhbHNlXG4pO1xuY29uc3QgcHJvZmlsZVRpdGxlVG9vbHRpcEhhbmRsZXIgPSBuZXcgVG9vbHRpcEhhbmRsZXIoXG4gIFwiI3Byb2ZpbGUtdGl0bGVcIixcbiAgXCIucHJvZmlsZV9fdG9vbHRpcC10aXRsZVwiXG4pO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uVG9vbHRpcEhhbmRsZXIgPSBuZXcgVG9vbHRpcEhhbmRsZXIoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcbiAgXCIucHJvZmlsZV9fdG9vbHRpcC1kZXNjcmlwdGlvblwiXG4pO1xuXG5sZXQgY2FyZFNlY3Rpb247XG5cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjbW9kYWwtZWRpdC1wcm9maWxlXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XG4pO1xuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtYWRkLWNhcmRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLXBpY3R1cmVcIik7XG5jb25zdCBjb25maXJtQ2FyZERlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNtb2RhbC1jYXJkLWRlbGV0ZVwiKTtcbmNvbnN0IHByb2ZpbGVQaWN0dXJlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjbW9kYWwtcHJvZmlsZS1waWN0dXJlXCIsXG4gIGhhbmRsZVByb2ZpbGVQaWN0dXJlU3VibWl0XG4pO1xuY29uc3QgZXJyb3JNZXNzYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoTWVzc2FnZShcIiNtb2RhbC1tZXNzYWdlXCIpO1xuY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBcIiNwcm9maWxlLXRpdGxlXCIsXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcbiAgXCIucHJvZmlsZV9faW1hZ2VcIlxuKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgKGNhcmREYXRhKSA9PiBpbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpLFxuICAgIGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrXG4gICk7XG4gIHJldHVybiBjYXJkLmdldENhcmRFbGVtZW50KCk7XG59XG5cbi8vZW5hYmxlIGlucHV0IHZhbGlkYXRpb24gZm9yIGFsbCBmb3Jtc1xuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbk9uQWxsRm9ybXMoY29uZmlnKSB7XG4gIGNvbnN0IGZvcm1zID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcildO1xuICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XG4gICAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybSk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgLy9hZGQgdmFsaWRhdG9ycyBmb3IgYWxsIGZvcm1zXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gZm9ybVZhbGlkYXRvcjtcbiAgICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJbmZvRnJvbUFwaSgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcGlVc2VySW5mbyA9IGF3YWl0IHNpdGVBcGkuZmV0Y2hVc2VySW5mbygpO1xuICAgIHByb2ZpbGVVc2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICB1c2VyTmFtZTogYXBpVXNlckluZm8ubmFtZSxcbiAgICAgIHVzZXJEZXNjcmlwdGlvbjogYXBpVXNlckluZm8uYWJvdXQsXG4gICAgICB1c2VySW1hZ2VVcmw6IGFwaVVzZXJJbmZvLmF2YXRhcixcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShgJHtlcnJ9LiBDb3VsZCBub3QgcmV0cmlldmUgdXNlciBpbmZvLmApO1xuICAgIGVycm9yTWVzc2FnZVBvcHVwLm9wZW4oKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQ2FyZHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaW5pdGlhbENhcmRzID0gYXdhaXQgc2l0ZUFwaS5nZXRJbml0aWFsQ2FyZHMoKTtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShgJHtlcnJ9LiBDb3VsZCBub3QgcmV0cmlldmUgY2FyZHMuYCk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVRyYXNoQnV0dG9uQ2xpY2soY2FyZCkge1xuICB0cnkge1xuICAgIGNvbmZpcm1DYXJkRGVsZXRlUG9wdXAub3BlbigpO1xuICAgIGNvbmZpcm1DYXJkRGVsZXRlUG9wdXAuc2V0U3VibWl0SGFuZGxlcihhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBzaXRlQXBpLmRlbGV0ZUNhcmQoY2FyZC5pZCk7XG4gICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShgJHtlcnJ9LiBDb3VsZCBub3QgZGVsZXRlIGNhcmQuYCk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxpa2VCdXR0b25DbGljayhjYXJkLCBsaWtlQnV0dG9uU3RhdGVBY3RpdmUpIHtcbiAgdHJ5IHtcbiAgICBpZiAobGlrZUJ1dHRvblN0YXRlQWN0aXZlKSB7XG4gICAgICBzaXRlQXBpLnVubGlrZUNhcmQoY2FyZC5pZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpdGVBcGkubGlrZUNhcmQoY2FyZC5pZCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5zZXRNZXNzYWdlKGAke2Vycn0uIENvdWxkIG5vdCBsaWtlL3VubGlrZSBjYXJkLmApO1xuICAgIGVycm9yTWVzc2FnZVBvcHVwLm9wZW4oKTtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgSGFuZGxlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vaGFuZGxlIGZvcm0gc3VibWl0cy4gQ2xhc3MgaW50ZXJhY3Rpb25zIGhhbmRsZWQgdGhyb3VnaCBsb29zZSBjb3VwbGluZ1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICB0cnkge1xuICAgIGNvbnN0IGZldGNoUmVxdWVzdCA9IHNpdGVBcGkudXBkYXRlVXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKTtcbiAgICBhd2FpdCBwcm9maWxlRWRpdFBvcHVwLmFwcGx5U2F2aW5nQW5pbWF0aW9uKGZldGNoUmVxdWVzdCk7XG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIHVzZXJOYW1lOiB0aXRsZSxcbiAgICAgIHVzZXJEZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgfSk7XG4gICAgcHJvZmlsZVRpdGxlVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xuICAgIHByb2ZpbGVEZXNjcmlwdGlvblRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShgJHtlcnJ9LiBFcnJvciBzZXR0aW5nIHVzZXIgaW5mby5gKTtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5vcGVuKCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdCh7IHRpdGxlLCBpbWFnZUxpbmsgfSkge1xuICB0cnkge1xuICAgIGNvbnN0IGNhcmREYXRhID0geyBuYW1lOiB0aXRsZSwgbGluazogaW1hZ2VMaW5rIH07XG4gICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gc2l0ZUFwaS5hZGRDYXJkKGNhcmREYXRhKTtcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgYWRkQ2FyZFBvcHVwLmFwcGx5U2F2aW5nQW5pbWF0aW9uKGZldGNoUmVxdWVzdCk7XG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLCBcInByZXBlbmRcIik7XG4gICAgY2FyZFRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tcIm1vZGFsLWFkZC1jYXJkLWZvcm1cIl0ucmVzZXRGb3JtVmFsaWRhdGlvbih0cnVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAuc2V0TWVzc2FnZShgJHtlcnJ9LiBDb3VsZCBub3QgYWRkIGNhcmQuYCk7XG4gICAgZXJyb3JNZXNzYWdlUG9wdXAub3BlbigpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVQaWN0dXJlU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gc2l0ZUFwaS5jaGFuZ2VBdmF0YXIoaW5wdXRWYWx1ZXMuaW1hZ2VMaW5rKTtcbiAgICBhd2FpdCBwcm9maWxlUGljdHVyZVBvcHVwLmFwcGx5U2F2aW5nQW5pbWF0aW9uKGZldGNoUmVxdWVzdCk7XG4gICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHsgdXNlckltYWdlVXJsOiBpbnB1dFZhbHVlcy5pbWFnZUxpbmsgfSk7XG4gICAgZm9ybVZhbGlkYXRvcnNbXCJtb2RhbC1wcm9maWxlLXBpY3R1cmUtZm9ybVwiXS5yZXNldEZvcm1WYWxpZGF0aW9uKHRydWUpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBlcnJvck1lc3NhZ2VQb3B1cC5zZXRNZXNzYWdlKGAke2Vycn0uIENvdWxkIG5vdCBjaGFuZ2UgcHJvZmlsZSBwaWN0dXJlLmApO1xuICAgIGVycm9yTWVzc2FnZVBvcHVwLm9wZW4oKTtcbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vZWRpdCBwcm9maWxlIGJ1dHRvbiBwb3B1bGF0ZXMgdGhlIGlucHV0cyBhbmQgYnJpbmdzIHVwIHRoZSBtb2RhbC5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGluZm9Gcm9tVXNlckNsYXNzID0gcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgY29uc3QgaW5mb0ZvclBvcHVwQ2xhc3MgPSB7XG4gICAgdGl0bGU6IGluZm9Gcm9tVXNlckNsYXNzLm5hbWUsXG4gICAgZGVzY3JpcHRpb246IGluZm9Gcm9tVXNlckNsYXNzLmRlc2NyaXB0aW9uLFxuICB9O1xuXG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXMoaW5mb0ZvclBvcHVwQ2xhc3MpO1xuICBmb3JtVmFsaWRhdG9yc1tcIm1vZGFsLXByb2ZpbGUtZm9ybVwiXS5yZXNldEZvcm1WYWxpZGF0aW9uKGZhbHNlKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy9wcm9maWxlIGFkZCBidXR0b24gYnJpbmdzIHVwIG1vZGFsXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy9jaGVjayBmb3IgdGV4dCBlbGxpcHNpcyBhZnRlciByZXNpemluZ1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xuICBjYXJkVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xuICBwcm9maWxlVGl0bGVUb29sdGlwSGFuZGxlci5oYW5kbGVUb29sdGlwKCk7XG4gIHByb2ZpbGVEZXNjcmlwdGlvblRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbn0pO1xuXG4vL3Byb2ZpbGUgcGljdHVyZSBtb2RhbFxucHJvZmlsZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVQaWN0dXJlUG9wdXAub3BlbigpO1xufSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbml0aWFsaXphdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy9oYXZlIGluaXRpYWxDYXJkcyByZW5kZXIgYW5kIGZldGNoIHVzZXJJbmZvIGZyb20gQVBJLCB0byBzZXQgaXQgaW4gdGhlIHByb2ZpbGVcblByb21pc2UuYWxsKFtpbml0aWFsaXplQ2FyZHMoKSwgc2V0VXNlckluZm9Gcm9tQXBpKCldKS50aGVuKCgpID0+IHtcbiAgLy9jcmVhdGUgaW5pdGlhbCB0b29sdGlwcyBvbiBwYWdlIGxvYWRcbiAgY2FyZFRvb2x0aXBIYW5kbGVyLmhhbmRsZVRvb2x0aXAoKTtcbiAgcHJvZmlsZVRpdGxlVG9vbHRpcEhhbmRsZXIuaGFuZGxlVG9vbHRpcCgpO1xuICBwcm9maWxlRGVzY3JpcHRpb25Ub29sdGlwSGFuZGxlci5oYW5kbGVUb29sdGlwKCk7XG4gIC8vZW5hYmxlIGZvcm0gdmFsaWRhdGlvblxuICBlbmFibGVWYWxpZGF0aW9uT25BbGxGb3Jtcyhjb25maWdPYmplY3QpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihhcGlTZXR0aW5ncykge1xuICAgIHRoaXMuX2FwaVNldHRpbmdzID0gYXBpU2V0dGluZ3M7XG4gICAgdGhpcy5faGVhZGVycyA9IGFwaVNldHRpbmdzLmhlYWRlcnM7XG4gICAgdGhpcy5fYmFzZVVybCA9IGFwaVNldHRpbmdzLmJhc2VVcmw7XG4gICAgdGhpcy5fdXNlckluZm9VcmwgPSBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWA7XG4gICAgdGhpcy5fY2FyZHNVcmwgPSBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2A7XG4gICAgdGhpcy5fYXZhdGFyVXJsID0gYCR7dGhpcy5fdXNlckluZm9Vcmx9L2F2YXRhcmA7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IHJlc3BvbnNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgICAgY29uc3QgY2FyZHNBcnJheSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhjYXJkc0FycmF5KTtcbiAgICAgIHJldHVybiBjYXJkc0FycmF5O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gZ2V0IGNhcmRzOiBcIiwgZXJyKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICAvL2NhcmRzQXJyYXkgaXMgYW4gYXJyYXkgb2YgY2FyZGF0YSBvYmplY3RzXG4gIGFzeW5jIGFkZEFycmF5T2ZDYXJkcyhjYXJkc0FycmF5KSB7XG4gICAgY2FyZHNBcnJheS5mb3JFYWNoKGFzeW5jIChjYXJkRGF0YSkgPT4ge1xuICAgICAgdGhpcy5hZGRDYXJkKGNhcmREYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vY2FyZERhdGEgaXMgYW4gb2JqZWN0IHdpdGggbmFtZSBhbmQgbGluayBwcm9wZXJ0aWVzXG4gIGFzeW5jIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGNhcmQpO1xuICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IhIENvdWxkIG5vdCBhZGQgYSBjYXJkOiBcIiwgZXJyLCBjYXJkRGF0YSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyLnN0YXR1cyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fY2FyZHNVcmx9LyR7Y2FyZElkfWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGRlbGV0ZSBjYXJkOiBcIiwgZXJyLCBjYXJkSWQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5zdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9jYXJkc1VybH0vJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJFcnJvciEgRmFpbGVkIHRvIGxpa2UgYnV0dG9uOiBcIiwgZXJyLCBjYXJkSWQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5zdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVubGlrZUNhcmQoY2FyZElkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2NhcmRzVXJsfS8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yISBGYWlsZWQgdG8gdW5saWtlIGJ1dHRvbjogXCIsIGVyciwgY2FyZElkKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJJbmZvKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLl91c2VySW5mb1VybCwge1xuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSk7XG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvOiBcIiwgZXJyKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnIuc3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVVc2VySW5mbyh1c2VyTmFtZSwgdXNlckFib3V0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuX3VzZXJJbmZvVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogdXNlck5hbWUsXG4gICAgICAgICAgYWJvdXQ6IHVzZXJBYm91dCxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIGluZm86IFwiLCBlcnIsIHVzZXJOYW1lLCB1c2VyQWJvdXQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5zdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoYW5nZUF2YXRhcih1c2VyTGluaykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLl9hdmF0YXJVcmwsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhdmF0YXI6IHVzZXJMaW5rLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgY2hhbmdlIGF2YXRhciBpbWFnZTogXCIsIGVyciwgdXNlckxpbmspO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVyci5zdGF0dXMpO1xuICAgIH1cbiAgfVxufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gT3JpZ2luYWwgVXNlciBJbmZvIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLy8ge1widXNlclwiOntcIm5hbWVcIjpcIkphY3F1ZXMgQ291c3RlYXVcIixcImFib3V0XCI6XCJTYWlsb3IsIHJlc2VhcmNoZXJcIixcImF2YXRhclwiOlwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9mcm9udGVuZC1kZXZlbG9wZXIvY29tbW9uL2F2YXRhci5qcGdcIixcIl9pZFwiOlwiYjVjNzNmZDU5YzNiMmEzZDhiNzNlOTRlXCJ9LFwidG9rZW5cIjpcImNiOGYzNzY4LTFlMWEtNDdjOC1hMGY2LWY0NzU0ZjliYWI4N1wifVxuLy9odHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL2Zyb250ZW5kLWRldmVsb3Blci9jb21tb24vYXZhdGFyLmpwZ1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1YnRpdGxlXCIpO1xuICAgIC8vc2V0IGV2ZW50IGxpc3RlbmVycyBpbiB0aGUgY29uc3RydWN0b3JcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBzdXBlci5vcGVuKCk7XG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBzZXRTdWJtaXRIYW5kbGVyKHN1Ym1pdEhhbmRsZXIpIHtcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKHRoaXMuX3N1Ym1pdEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzdWJtaXRIYW5kbGVyIGhhcyBub3QgYmVlbiBzZXRcIik7XG4gICAgICB9XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhNZXNzYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fdGV4dE1lc3NhZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faGVhZGluZ1wiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBzZXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLl90ZXh0TWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH1cbn1cbiIsIi8vYSBjbGFzcyB0aGF0IGhhbmRsZXMgMyBlbGVtZW50cy4gT25lIHRoYXQgcmVwcmVzZW50cyBhIG5hbWUsIG9uZSB0aGF0IHJlcHJlc2VudHMgYSBkZXNjcmlwdGlvbiwgYW5kIG9uZSB0aGF0IHJlcHJlc2VudHMgYSB1c2VyIGltYWdlXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgaW1hZ2VTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZVNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vcmV0dXJuIGFuIG9iamVjdCB3aXRoIHVzZXIncyBpbmZvXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudC50cmltKCksXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgIGltYWdlTGluazogdGhpcy5faW1hZ2VFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG4gIC8vc2V0IHRoZSAyIGVsZW1lbnQncyB0ZXh0Q29udGVudCB0byBwYXNzZWQtaW4gYXJndW1lbnRzLCBhbmQgdGhlIHVybCBmb3IgdGhlIGltYWdlXG4gIHNldFVzZXJJbmZvKHsgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiwgdXNlckltYWdlVXJsIH0pIHtcbiAgICBpZiAodXNlck5hbWUpIHtcbiAgICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlck5hbWU7XG4gICAgfVxuICAgIGlmICh1c2VyRGVzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgaWYgKHVzZXJJbWFnZVVybCkge1xuICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHVzZXJJbWFnZVVybDtcbiAgICB9XG4gICAgLy9oYW5kbGUgZXJyb3JzIGlmIGltYWdlIGNhbid0IGxvYWRcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBcIi4vOGI0NTIzOTMyZTQ5OGVlMTkyODUucG5nXCI7XG4gICAgICBhbGVydChcIkludmFsaWQgVVJMLiBDb3VsZCBub3QgY2hhbmdlIGltYWdlIVwiKTtcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVUcmFzaEJ1dHRvbkNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwidGhpcyIsIl9kYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiaWQiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlVHJhc2hCdXR0b25DbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfdGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiX2NhcmRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9saWtlQnV0dG9uU3RhdGVBY3RpdmUiLCJpc0xpa2VkIiwiX3NldExpa2VCdXR0b25TdGF0ZSIsIl9hZGRMaWtlRnVuY3Rpb25hbGl0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkZWxldGVDYXJkIiwiX2Vycm9yQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudEltYWdlIiwiX3JlcGxhY2VXaXRoRXJyb3JDYXJkIiwiX2Vycm9yTWVzc2FnZSIsIl9lcnJvckNhcmRUZW1wbGF0ZSIsImZpcnN0RWxlbWVudENoaWxkIiwiX2Vycm9yQ2FyZE1lc3NhZ2UiLCJfZXJyb3JEZWxldGVCdXR0b24iLCJfZXJyb3JDYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsImlubmVyVGV4dCIsInJlcGxhY2VXaXRoIiwiZ2V0Q2FyZEVsZW1lbnQiLCJfY2FyZEVsZW1lbnRUaXRsZSIsInNldEF0dHJpYnV0ZSIsIm9uZXJyb3IiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJfaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfY2hlY2tBbGxGb3JtSW5wdXRzQXJlVmFsaWQiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJlbmFibGVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlU3VibWl0QnV0dG9uIiwiX3Nob3dFcnJvck1lc3NhZ2UiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9oYW5kbGVFcnJvclZpc2liaWxpdHkiLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVzZXQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJUb29sdGlwSGFuZGxlciIsInRleHRTZWxlY3RvciIsInRvb2x0aXBTZWxlY3RvciIsInVwZGF0ZVRleHQiLCJfdGV4dFNlbGVjdG9yIiwiX3Rvb2x0aXBTZWxlY3RvciIsIl91cGRhdGVUZXh0IiwiaGFuZGxlVG9vbHRpcCIsImVsdCIsImVsbGlwc2lzRXhpc3RzIiwic2Nyb2xsV2lkdGgiLCJjbGllbnRXaWR0aCIsInRvb2x0aXBJc09wZW4iLCJwYXJlbnROb2RlIiwidG9vbHRpcCIsImNyZWF0ZUVsZW1lbnQiLCJzbGljZSIsImFmdGVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJwbGFjZW1lbnQiLCJpdGVtIiwiYWRkSXRlbSIsIml0ZW1FbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2NsaWNrVG9DbG9zZU1vZGFsIiwiZXZlbnQiLCJ0YXJnZXQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dE9iamVjdCIsIl9pbnB1dEVsZW1lbnRzIiwiX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0IiwiZ2V0SW5wdXRFbGVtZW50cyIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRJbnB1dEVsZW1lbnRBdHRyaWJ1dGVOYW1lcyIsImF0dHJpYnV0ZU5hbWVzIiwicHVzaCIsIl9jaGFuZ2VTdWJtaXRCdXR0b25UZXh0IiwidGV4dCIsImFwcGx5U2F2aW5nQW5pbWF0aW9uIiwiZmV0Y2hSZXF1ZXN0IiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZldGNoUmVzdWx0IiwiXyIsImFsbCIsImNvbnRhaW5zIiwiYXN5bmMiLCJwcmV2ZW50RGVmYXVsdCIsImNvbmZpZ09iamVjdCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVJbWFnZSIsImZvcm1WYWxpZGF0b3JzIiwic2l0ZUFwaSIsImFwaVNldHRpbmdzIiwiX2FwaVNldHRpbmdzIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX3VzZXJJbmZvVXJsIiwiX2NhcmRzVXJsIiwiX2F2YXRhclVybCIsIl9jaGVja1Jlc3BvbnNlIiwicmVzcG9uc2UiLCJvayIsImdldEluaXRpYWxDYXJkcyIsInJlcyIsImZldGNoIiwiY2FyZHNBcnJheSIsImpzb24iLCJlcnIiLCJFcnJvciIsInN0YXR1cyIsImFkZEFycmF5T2ZDYXJkcyIsImFkZENhcmQiLCJjYXJkRGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZCIsImVycm9yIiwiY2FyZElkIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwiZmV0Y2hVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJhYm91dCIsImNoYW5nZUF2YXRhciIsInVzZXJMaW5rIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmRUb29sdGlwSGFuZGxlciIsInByb2ZpbGVUaXRsZVRvb2x0aXBIYW5kbGVyIiwicHJvZmlsZURlc2NyaXB0aW9uVG9vbHRpcEhhbmRsZXIiLCJjYXJkU2VjdGlvbiIsInByb2ZpbGVFZGl0UG9wdXAiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJvZmlsZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJ1c2VyRGVzY3JpcHRpb24iLCJlcnJvck1lc3NhZ2VQb3B1cCIsInNldE1lc3NhZ2UiLCJhZGRDYXJkUG9wdXAiLCJfcmVmMiIsImltYWdlTGluayIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwic3JjIiwiYWx0Iiwib25sb2FkIiwiY29uZmlybUNhcmREZWxldGVQb3B1cCIsInNldFN1Ym1pdEhhbmRsZXIiLCJzdWJtaXRIYW5kbGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJwcm9maWxlUGljdHVyZVBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ1c2VySW1hZ2VVcmwiLCJfdGV4dE1lc3NhZ2UiLCJtZXNzYWdlIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImltYWdlU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX2ltYWdlRWxlbWVudCIsImdldFVzZXJJbmZvIiwidHJpbSIsImFsZXJ0IiwiY3JlYXRlQ2FyZCIsImxpa2VCdXR0b25TdGF0ZUFjdGl2ZSIsImluZm9Gcm9tVXNlckNsYXNzIiwiaW5mb0ZvclBvcHVwQ2xhc3MiLCJ3aW5kb3ciLCJpbml0aWFsQ2FyZHMiLCJpbml0aWFsaXplQ2FyZHMiLCJhcGlVc2VySW5mbyIsInNldFVzZXJJbmZvRnJvbUFwaSIsInRoZW4iLCJjb25maWciLCJmb3JtVmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9